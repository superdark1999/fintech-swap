(this["webpackJsonpluckyswap-exchange-v2"]=this["webpackJsonpluckyswap-exchange-v2"]||[]).push([[25],{1654:function(e,t,n){"use strict";n.r(t);var r,a,c,i=n(12),o=n(14),s=n(205),u=n(0),p=n(1271),d=n(1272),f=n(3),l=n(45),b=n.n(l),x=n(1264),j=n(1265),h=n(1266),m=n(1);function g(e){var t=e.activeTab,n=e.toggle;return Object(m.jsx)(S,{children:Object(m.jsxs)(x.a,{tabs:!0,children:[Object(m.jsx)(R,{children:Object(m.jsx)(j.a,{children:Object(m.jsx)(h.a,{className:b()({active:"1"===t}),onClick:function(){return n("1")},children:"all cards"})})}),Object(m.jsxs)(z,{children:[Object(m.jsx)(j.a,{children:Object(m.jsx)(h.a,{className:b()({active:"1"===t}),onClick:function(){return n("1")},children:"My Collection"})}),Object(m.jsx)(j.a,{children:Object(m.jsx)(h.a,{className:b()({active:"2"===t}),onClick:function(){return n("2")},children:"Pending"})}),Object(m.jsx)(j.a,{children:Object(m.jsx)(h.a,{className:b()({active:"3"===t}),onClick:function(){return n("3")},children:"unstaked"})}),Object(m.jsx)(j.a,{children:Object(m.jsx)(h.a,{className:b()({active:"4"===t}),onClick:function(){return n("4")},children:"staked"})})]})]})})}var O,v,k,w,y,A,I,N,D,C,T,S=f.default.div(r||(r=Object(i.a)(["\n  margin-top: 20px;\n\n  .nav-tabs {\n    // display: grid;\n    // grid-template-columns: 1fr 239px;\n    display: flex;\n    justify-content: space-between;\n    border-color: transparent;\n    border-bottom: 1px solid #ffffff8b !important;\n  }\n\n  .nav-link {\n    text-transform: capitalize;\n\n    @media (max-width: 768px) {\n      font-size: 16px;\n      white-space: nowrap;\n    }\n\n    &.active {\n      color: #f4c706 !important;\n      border-bottom: none !important;\n    }\n  }\n"]))),R=f.default.div(a||(a=Object(i.a)([""]))),z=f.default.div(c||(c=Object(i.a)(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  justify-items: end;\n"]))),E=n(2),P=n.n(E),F=n(18),W=n(1273),B=n(20),M=n(15),U=n(124),V=n.n(U),Y=(n(590),n(591),n(97)),K=n(174),L=n(89),G=(n(151),n(35),[{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}]),X=function(){var e=Object(F.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return",fetch("https://api-testnet.bscscan.com/api?module=account&action=tokennfttx&address=".concat(t,"&startblock=0&endblock=999999999999&sort=asc")).then((function(e){return e.json()})).then((function(e){return e.result.map((function(e){return Object(M.a)(Object(M.a)({},e),{},{tokenID:parseInt(e.tokenID),contractAddress:Object(K.getAddress)(e.contractAddress)})}))})).catch((function(e){return new Promise((function(e){return e([])}))})));case 2:return e.abrupt("return",new Promise((function(e){return e([])})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_="LUCKY_MARKETPLACE",J="AIRNFTS",H="BRNFT",q=(O={},Object(B.a)(O,Object(K.getAddress)("0x969a82989d9e410ed0ae36c12479552421c93eb2"),_),Object(B.a)(O,Object(K.getAddress)("0xF5db804101d8600c26598A1Ba465166c33CdAA4b"),J),Object(B.a)(O,Object(K.getAddress)("0x1dDB2C0897daF18632662E71fdD2dbDC0eB3a9Ec"),H),O),Z=function(){var e=Object(F.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{image:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(F.a)(P.a.mark((function e(t){var n,r,a,c,i,o;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V.a.get(t);case 3:return n=e.sent,r=n.data,a=null===r||void 0===r?void 0:r.nft,c=a.urlCompressed,i=a.name,o=a.description,e.abrupt("return",{image:c,name:i,description:o});case 9:return e.prev=9,e.t0=e.catch(0),console.log("get info airnft error : ",e.t0),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(F.a)(P.a.mark((function e(t){var n,r,a,c,i;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V.a.get(t);case 3:return n=e.sent,r=n.data,a=r.name,c=r.description,i=r.image,e.abrupt("return",{name:a,description:c,image:i});case 9:return e.prev=9,e.t0=e.catch(0),console.log("get image brnft error : ",e.t0),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(F.a)(P.a.mark((function e(t){var n,r,a,c,i;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V.a.get(t);case 3:return n=e.sent,r=n.data,a=r.name,c=r.description,i=r.image,e.abrupt("return",{name:a,description:c,image:i});case 9:return e.prev=9,e.t0=e.catch(0),console.log("get image bakery error : ",e.t0),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(F.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=Object(F.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=q[t.contractAddress],e.next=e.t0===_?3:e.t0===J?4:e.t0===H?5:6;break;case 3:return e.abrupt("return",Z(t.uri));case 4:return e.abrupt("return",Q(t.uri));case 5:return e.abrupt("return",$(t.uri));case 6:return e.abrupt("return",ee(t.uri));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(F.a)(P.a.mark((function e(t){var n,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.map((function(e){return{address:e.contractAddress,name:"tokenURI",params:[e.tokenID]}})),e.next=4,Object(L.b)(G,n,{requireSuccess:!1});case 4:return r=(r=e.sent).flat(),e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(F.a)(P.a.mark((function e(t){var n,r,a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne(t);case 2:return n=e.sent,r=n.map((function(e,n){return{uri:e,contractAddress:t[n].contractAddress}})),e.next=6,te(r);case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(e,t){for(var n=[],r=0;r<e.length;r++){for(var a=e[r],c=!1,i=0;i<t.length;i++)if(Object(K.getAddress)(t[i].contractAddress)===a.contractAddress&&t[i].tokenID===a.tokenID){c=!0;break}c||n.push(a)}return n},ce=function(e,t){for(var n,r=new Map,a=[],c=e.length-1;c>=0;c--){var i=(n=e[c],"".concat(n.tokenID,"-").concat(n.contractAddress));r.get(i)||Object(K.getAddress)(e[c].to)!==t||a.push(e[c]),r.set(i,1)}return a},ie=function(){var e=Object(F.a)(P.a.mark((function e(t){var n,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re(t);case 2:for(n=e.sent,r=0;r<t.length;r++)Object.assign(t[r],n[r]);return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=n(23),se=n(7),ue=n(10),pe=new(function(){function e(t){Object(se.a)(this,e),this.restConnector=void 0,this.restConnector=t.restConnector}return Object(ue.a)(e,[{key:"getAllTokens",value:function(){var e=Object(F.a)(P.a.mark((function e(){var t,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.restConnector.get("/stakingNft");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAllTokensId",value:function(){var e=Object(F.a)(P.a.mark((function e(){var t,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.restConnector.get("/stakingNft/poolsId");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"getPendingTokens",value:function(){var e=Object(F.a)(P.a.mark((function e(){var t,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.restConnector.get("/stakingNft?status=pending");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getApprovedTokens",value:function(){var e=Object(F.a)(P.a.mark((function e(){var t,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.restConnector.get("/stakingNft?status=approve");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getStakingTokens",value:function(){var e=Object(F.a)(P.a.mark((function e(){var t,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.restConnector.get("/stakingNft?status=staking");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"registerStakingToken",value:function(){var e=Object(F.a)(P.a.mark((function e(t){var n,r,a,c,i,o;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,r=t.description,a=t.urlToken,c=t.image,i=t.tokenID,o=t.contractAddress,!(n&&r&&a&&c&&i&&o)){e.next=3;break}return e.abrupt("return",this.restConnector.post("/stakingNft",{name:n,description:r,urlToken:a,image:c,tokenID:i,contractAddress:o}));case 3:throw new Error("Not have enough info token");case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stakeToken",value:function(){var e=Object(F.a)(P.a.mark((function e(t){var n,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.tokenID,r=t.contractAddress,e.abrupt("return",this.restConnector.patch("/stakingNft/",{tokenID:n,contractAddress:r,status:"staking"}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTokenByID",value:function(){var e=Object(F.a)(P.a.mark((function e(t){var n,r,a,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.tokenID,r=t.contractAddress,e.next=3,this.restConnector.get("/stakingNft?tokenID=".concat(n,"&contractAddress=").concat(r));case 3:return a=e.sent,c=a.data,e.abrupt("return",c[0]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}())({restConnector:V.a.create({baseURL:"http://localhost:3004/"})}),de=n(1643),fe=function(e){return{success:{color:"rgba(0, 0, 0, 0.65)",border:"1px solid #b7eb8f",backgroundColor:"#f6ffed"},warning:{color:"rgba(0, 0, 0, 0.65)",border:"1px solid #ffe58f",backgroundColor:"#fffbe6"},error:{color:"rgba(0, 0, 0, 0.65)",border:"1px solid #ffa39e",backgroundColor:"#fff1f0"},info:{color:"rgba(0, 0, 0, 0.65)",border:"1px solid #91d5ff",backgroundColor:"#e6f7ff"},open:{color:"rgba(0, 0, 0, 0.65)",border:"1px solid #91d5ff",backgroundColor:"#e6f7ff"}}[e]},le=function(e,t){var n=t.message,r=t.description,a=t.duration,c=void 0===a?3:a;de.a[e]({message:n,description:r,style:fe(e),duration:c})},be=n(1270),xe=f.default.div(v||(v=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  max-width: auto;\n\n  @media (min-width: 768px) {\n    max-width: 230px;\n  }\n"]))),je=f.default.div(k||(k=Object(i.a)(["\n  position: relative;\n  width: 180px;\n  height: 276px;\n  overflow: hidden;\n\n  .thumb {\n    height: inherit;\n    transform: scale(1);\n    transition: all 0.9s;\n    object-fit: cover;\n  }\n\n  .line-box {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 2;\n  }\n"]))),he=f.default.div(w||(w=Object(i.a)(["\n  margin-bottom: 15px;\n"]))),me=f.default.div(y||(y=Object(i.a)(["\n  background: #2f2f2f;\n  border-bottom-left-radius: 12px;\n  border-bottom-right-radius: 12px;\n  width: 280px;\n\n  @media (min-width: 768px) {\n    width: 100%;\n  }\n"]))),ge=(f.default.button(A||(A=Object(i.a)(["\n  background: url('../images/staking/line-button.png') no-repeat center center;\n  background-size: contain;\n  width: 100%;\n  height: 67px;\n  line-height: 67px;\n  font-size: 20px;\n  font-weight: 700;\n  text-transform: uppercase;\n  text-align: center;\n  color: #ff3b3b;\n  border: 0;\n\n  &.green-color {\n    color: #1cbb1c;\n  }\n\n  &:hover {\n    .effect-light {\n      text-align: center;\n      font-size: 1.2em;\n      color: #fff;\n      font-weight: 700;\n      text-transform: uppercase;\n      animation: blur 0.75s ease-out infinite;\n      text-shadow: 0px 0px 5px #fff, 0px 0px 7px #fff;\n    }\n  }\n\n  @keyframes blur {\n    from {\n      text-shadow: 0px 0px 10px #fff, 0px 0px 10px #fff, 0px 0px 25px #fff, 0px 0px 25px #fff, 0px 0px 25px #fff,\n        0px 0px 25px #fff, 0px 0px 25px #fff, 0px 0px 25px #fff, 0px 0px 50px #fff, 0px 0px 50px #fff,\n        0px 0px 50px #7b96b8, 0px 0px 150px #7b96b8, 0px 10px 100px #7b96b8, 0px 10px 100px #7b96b8,\n        0px 10px 100px #7b96b8, 0px 10px 100px #7b96b8, 0px -10px 100px #7b96b8, 0px -10px 100px #7b96b8;\n    }\n  }\n"]))),f.default.div(I||(I=Object(i.a)(["\n  padding: 15px;\n"])))),Oe=(f.default.h2(N||(N=Object(i.a)(["\n  font-size: 16px;\n  text-transform: capitalize;\n  color: #ffffff;\n  margin-bottom: 10px;\n"]))),f.default.div(D||(D=Object(i.a)(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  align-items: center;\n"]))),f.default.h3(C||(C=Object(i.a)(["\n  color: #f4c708;\n  font-size: 24px;\n  font-family: 'Roboto Mono', monospace !important;\n  font-weight: 600;\n  position: relative;\n  transform: scale(1);\n  text-shadow: -1px 0 1px #c5a354, 0 1px 1px #e0b649, 5px 5px 10px rgb(179 167 106 / 78%),\n    -5px -5px 10px rgb(183 155 65 / 40%);\n\n  &:before {\n    content: attr(data-heading);\n    left: 0;\n    top: 0;\n    position: absolute;\n    z-index: 1;\n    background: linear-gradient(\n      to bottom,\n      #ffe047 22%,\n      #fff144 24%,\n      #cfc09f 26%,\n      #ffe686 27%,\n      #ffecb3 40%,\n      #ffe14f 78%\n    );\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    text-shadow: none;\n  }\n"]))),f.default.div(T||(T=Object(i.a)(["\n  background: url('../images/staking/bg-button.png') no-repeat center center;\n  background-size: contain;\n  width: 100%;\n  height: 36px;\n  text-transform: uppercase;\n  text-align: center;\n  line-height: 36px;\n  font-size: 14px;\n  font-weight: 600;\n"])))),ve=function(e){var t=e.name,n=e.description,r=e.tokenID,a=e.contractAddress,c=e.image,i=e.onRegister;return Object(m.jsx)(be.a,{sm:"12",md:"3",className:"align-center space-mb",children:Object(m.jsxs)(xe,{children:[Object(m.jsxs)(je,{children:[Object(m.jsx)("img",{src:c,className:"thumb",alt:""}),Object(m.jsx)("img",{src:"/images/staking/box-img.png",alt:"",className:"line-box"})]}),Object(m.jsx)(he,{children:Object(m.jsx)("img",{src:"/images/staking/effect.png",alt:""})}),Object(m.jsx)(me,{children:Object(m.jsx)(ge,{children:Object(m.jsx)(Oe,{onClick:function(){return i({name:t,description:n,tokenID:r,contractAddress:a,image:c})},children:"Register"})})})]})})},ke=n(1661),we=n(1657),ye=n(1658),Ae=n(1332),Ie=function(e,t){if(!e||"string"!==typeof e)return"";var n=e.length||0;return"".concat(e.slice(0,t),"...").concat(e.slice(n-t,n))};var Ne,De,Ce,Te,Se,Re,ze,Ee,Pe,Fe,We=function(e){var t=e.isShowModalSubmit,n=e.setShowModalSubmit,r=e.onSubmit,a=e.formRef,c=e.token;return Object(m.jsx)(ke.a,{title:"Submit Staking",visible:t,onCancel:function(){return n(!1)},footer:null,width:400,children:Object(m.jsxs)(we.a,{ref:a,onFinish:r,style:{width:"100%"},fields:[{name:["tokenID"],value:null===c||void 0===c?void 0:c.tokenID},{name:["contractAddress"],value:Ie(null===c||void 0===c?void 0:c.contractAddress,10)},null!=(null===c||void 0===c?void 0:c.name)&&{name:["name"],value:null===c||void 0===c?void 0:c.name},null!=(null===c||void 0===c?void 0:c.description)&&{name:"description",value:null===c||void 0===c?void 0:c.description}],children:[Object(m.jsxs)("div",{style:{marginBottom:"6px"},children:["Name",Object(m.jsx)("span",{style:{color:"red",marginRight:"4px"},children:"*"})]}),Object(m.jsx)(we.a.Item,{name:"name",validateTrigger:"onChange",children:Object(m.jsx)(ye.a,{style:{borderRadius:"16px",overflow:"hidden",width:"100%"},disabled:null===c||void 0===c?void 0:c.name,placeholder:"Enter name card to..."})}),Object(m.jsxs)("div",{style:{marginBottom:"6px"},children:["Description",Object(m.jsx)("span",{style:{color:"red",marginRight:"4px"},children:"*"})]}),Object(m.jsx)(we.a.Item,{name:"description",validateTrigger:"onChange",children:Object(m.jsx)(ye.a,{style:{borderRadius:"16px",overflow:"hidden",width:"100%"},disabled:null===c||void 0===c?void 0:c.description,placeholder:"Enter description to..."})}),Object(m.jsxs)("div",{style:{marginBottom:"6px"},children:["URL Token",Object(m.jsx)("span",{style:{color:"red",marginRight:"4px"},children:"*"})]}),Object(m.jsx)(we.a.Item,{name:"urlToken",validateTrigger:"onChange",children:Object(m.jsx)(ye.a,{style:{borderRadius:"16px",overflow:"hidden",width:"100%"},placeholder:"Enter url token to..."})}),Object(m.jsx)("div",{style:{marginBottom:"6px"},children:"Token ID"}),Object(m.jsx)(we.a.Item,{name:"tokenID",validateTrigger:"onChange",children:Object(m.jsx)(ye.a,{style:{borderRadius:"16px",overflow:"hidden",width:"100%"},disabled:!0})}),Object(m.jsx)("div",{style:{marginBottom:"6px"},children:"Contract Address"}),Object(m.jsx)(we.a.Item,{name:"contractAddress",validateTrigger:"onChange",children:Object(m.jsx)(ye.a,{style:{borderRadius:"16px",overflow:"hidden",width:"100%"},disabled:!0})}),Object(m.jsx)(we.a.Item,{children:Object(m.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:Object(m.jsx)(Ae.a,{htmlType:"submit",children:"Submit"})})})]})})},Be=function(e){var t=e.setMyTokens,n=e.activeTab,r=Object(u.useRef)(),a=Object(u.useRef)(!1),c=Object(u.useState)(!1),i=Object(o.a)(c,2),s=i[0],p=i[1],d=Object(oe.a)().account,f=Object(u.useState)([]),l=Object(o.a)(f,2),b=l[0],x=l[1],j=Object(u.useState)(),h=Object(o.a)(j,2),g=h[0],O=h[1];Object(u.useEffect)((function(){var e=function(){var e=Object(F.a)(P.a.mark((function e(){var n,r,a,c,i,s,u;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([X(d),pe.getAllTokensId()]);case 3:return n=e.sent,r=Object(o.a)(n,2),a=r[0],c=r[1],i=ce(a,d),t(i),s=ae(i,c),e.next=12,ie(s);case 12:u=e.sent,x(u),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),le("error",{message:"Fetching Error",description:null===e.t0||void 0===e.t0?void 0:e.t0.message});case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}();d&&"1"===n&&!a.current&&(e(),a.current=!0)}),[d,t,n]);var v=function(){var e=Object(F.a)(P.a.mark((function e(t){var n,r,a,c,i,o;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=8;break}return r=(n=g).contractAddress,a=n.tokenID,c=n.image,i=n.name,o=n.description,e.next=4,pe.registerStakingToken({urlToken:t.urlToken,name:null!==i&&void 0!==i?i:t.name,description:null!==o&&void 0!==o?o:t.description,image:c,tokenID:a,contractAddress:r}).catch((function(e){return le("error",{message:"Error",description:null===e||void 0===e?void 0:e.message})}));case 4:le("success",{message:"Update info NFT success, you can check NFT on approved collection",description:""}),p(!1),x((function(e){return e.filter((function(e){return e.tokenID!==a||e.contractAddress!==r}))})),O(null);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(e){O(e),p(!0)};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(W.a,{children:b.map((function(e){return Object(m.jsx)(ve,{name:e.name,description:e.description,image:e.image,contractAddress:e.contractAddress,tokenID:e.tokenID,onRegister:k})}))}),Object(m.jsx)(We,{isShowModalSubmit:s,setShowModalSubmit:p,formRef:r,onSubmit:v,token:g})]})},Me=f.default.div(Ne||(Ne=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  max-width: auto;\n\n  @media (min-width: 768px) {\n    max-width: 230px;\n  }\n"]))),Ue=f.default.div(De||(De=Object(i.a)(["\n  position: relative;\n  width: 180px;\n  height: 276px;\n  overflow: hidden;\n\n  .thumb {\n    height: inherit;\n    transform: scale(1);\n    transition: all 0.9s;\n    object-fit: cover;\n  }\n\n  .line-box {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 2;\n  }\n"]))),Ve=f.default.div(Ce||(Ce=Object(i.a)(["\n  margin-bottom: 15px;\n"]))),Ye=(f.default.div(Te||(Te=Object(i.a)(["\n  background: #2f2f2f;\n  border-bottom-left-radius: 12px;\n  border-bottom-right-radius: 12px;\n  width: 280px;\n\n  @media (min-width: 768px) {\n    width: 100%;\n  }\n"]))),f.default.button(Se||(Se=Object(i.a)(["\n  background: url('../images/staking/line-button.png') no-repeat center center;\n  background-size: contain;\n  width: 100%;\n  height: 67px;\n  line-height: 67px;\n  font-size: 20px;\n  font-weight: 700;\n  text-transform: uppercase;\n  text-align: center;\n  color: #ff3b3b;\n  border: 0;\n\n  &.green-color {\n    color: #1cbb1c;\n  }\n\n  &:hover {\n    .effect-light {\n      text-align: center;\n      font-size: 1.2em;\n      color: #fff;\n      font-weight: 700;\n      text-transform: uppercase;\n      animation: blur 0.75s ease-out infinite;\n      text-shadow: 0px 0px 5px #fff, 0px 0px 7px #fff;\n    }\n  }\n\n  @keyframes blur {\n    from {\n      text-shadow: 0px 0px 10px #fff, 0px 0px 10px #fff, 0px 0px 25px #fff, 0px 0px 25px #fff, 0px 0px 25px #fff,\n        0px 0px 25px #fff, 0px 0px 25px #fff, 0px 0px 25px #fff, 0px 0px 50px #fff, 0px 0px 50px #fff,\n        0px 0px 50px #7b96b8, 0px 0px 150px #7b96b8, 0px 10px 100px #7b96b8, 0px 10px 100px #7b96b8,\n        0px 10px 100px #7b96b8, 0px 10px 100px #7b96b8, 0px -10px 100px #7b96b8, 0px -10px 100px #7b96b8;\n    }\n  }\n"]))),f.default.div(Re||(Re=Object(i.a)(["\n  padding: 15px;\n"]))),f.default.h2(ze||(ze=Object(i.a)(["\n  font-size: 16px;\n  text-transform: capitalize;\n  color: #ffffff;\n  margin-bottom: 10px;\n"]))),f.default.div(Ee||(Ee=Object(i.a)(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  align-items: center;\n"]))),f.default.h3(Pe||(Pe=Object(i.a)(["\n  color: #f4c708;\n  font-size: 24px;\n  font-family: 'Roboto Mono', monospace !important;\n  font-weight: 600;\n  position: relative;\n  transform: scale(1);\n  text-shadow: -1px 0 1px #c5a354, 0 1px 1px #e0b649, 5px 5px 10px rgb(179 167 106 / 78%),\n    -5px -5px 10px rgb(183 155 65 / 40%);\n\n  &:before {\n    content: attr(data-heading);\n    left: 0;\n    top: 0;\n    position: absolute;\n    z-index: 1;\n    background: linear-gradient(\n      to bottom,\n      #ffe047 22%,\n      #fff144 24%,\n      #cfc09f 26%,\n      #ffe686 27%,\n      #ffecb3 40%,\n      #ffe14f 78%\n    );\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    text-shadow: none;\n  }\n"]))),f.default.div(Fe||(Fe=Object(i.a)(["\n  background: url('../images/staking/bg-button.png') no-repeat center center;\n  background-size: contain;\n  width: 100%;\n  height: 36px;\n  text-transform: uppercase;\n  text-align: center;\n  line-height: 36px;\n  font-size: 14px;\n  font-weight: 600;\n"]))),function(e){var t=e.image;return Object(m.jsx)(be.a,{sm:"12",md:"3",className:"align-center space-mb",children:Object(m.jsxs)(Me,{children:[Object(m.jsxs)(Ue,{children:[Object(m.jsx)("img",{src:t,className:"thumb",alt:""}),Object(m.jsx)("img",{src:"/images/staking/box-img.png",alt:"",className:"line-box"})]}),Object(m.jsx)(Ve,{children:Object(m.jsx)("img",{src:"/images/staking/effect.png",alt:""})})]})})}),Ke=function(e){var t=e.activeTab,n=Object(u.useState)([]),r=Object(o.a)(n,2),a=r[0],c=r[1],i=Object(u.useRef)(!1);return Object(u.useEffect)((function(){var e=function(){var e=Object(F.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pe.getPendingTokens();case 3:t=e.sent,c(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),le("error",{message:"Error",description:null===e.t0||void 0===e.t0?void 0:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();"2"!==t||i.current||(e(),i.current=!0)}),[t]),Object(m.jsx)(W.a,{children:a.length>0&&a.map((function(e){return Object(m.jsx)(Ye,{image:e.image})}))})},Le=n(39),Ge=n(9),Xe=n(127),_e=n(44),Je=function(e,t,n){for(var r=0;r<e.length;r++)if(e[r].contractAddress===Object(_e.getAddress)(t)&&e[r].tokenID===n)return!0;return!1},He=function(e,t,n){for(var r=0;r<e.length;r++)if(e[r].contractAddress===Object(_e.getAddress)(t)&&e[r].tokenID===n)return e[r];return null},qe=n(169),Ze=n(38),Qe=n(6),$e=n(218),et=n(233),tt=n(67),nt=n(149),rt=function(){var e=Object(u.useState)(null),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(Ze.y)();return Object(u.useEffect)((function(){a.FEE_WITHDRAW().then((function(e){r(e.toNumber())})).catch((function(e){le("error",{message:"Error when get fee withdraw",description:null===e||void 0===e?void 0:e.message})}))}),[a]),n},at=n(29),ct=n(82),it=n(69),ot=n(42);var st=n(73);var ut,pt,dt,ft,lt,bt,xt,jt,ht,mt,gt=f.default.div(ut||(ut=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  max-width: auto;\n\n  @media (min-width: 768px) {\n    max-width: 230px;\n  }\n"]))),Ot=f.default.div(pt||(pt=Object(i.a)(["\n  position: relative;\n  width: 180px;\n  height: 276px;\n  overflow: hidden;\n\n  .thumb {\n    height: inherit;\n    transform: scale(1);\n    transition: all 0.9s;\n    object-fit: cover;\n  }\n\n  .line-box {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 2;\n  }\n"]))),vt=f.default.div(dt||(dt=Object(i.a)(["\n  margin-bottom: 15px;\n"]))),kt=f.default.div(ft||(ft=Object(i.a)(["\n  background: #2f2f2f;\n  border-bottom-left-radius: 12px;\n  border-bottom-right-radius: 12px;\n  width: 280px;\n\n  @media (min-width: 768px) {\n    width: 100%;\n  }\n"]))),wt=f.default.button(lt||(lt=Object(i.a)(["\n  background: url('../images/staking/line-button.png') no-repeat center center;\n  background-size: contain;\n  width: 100%;\n  height: 67px;\n  line-height: 67px;\n  font-size: 20px;\n  font-weight: 700;\n  text-transform: uppercase;\n  text-align: center;\n  color: #ff3b3b;\n  border: 0;\n\n  &.green-color {\n    color: #1cbb1c;\n  }\n\n  &:hover {\n    .effect-light {\n      text-align: center;\n      font-size: 1.2em;\n      color: #fff;\n      font-weight: 700;\n      text-transform: uppercase;\n      animation: blur 0.75s ease-out infinite;\n      text-shadow: 0px 0px 5px #fff, 0px 0px 7px #fff;\n    }\n  }\n\n  @keyframes blur {\n    from {\n      text-shadow: 0px 0px 10px #fff, 0px 0px 10px #fff, 0px 0px 25px #fff, 0px 0px 25px #fff, 0px 0px 25px #fff,\n        0px 0px 25px #fff, 0px 0px 25px #fff, 0px 0px 25px #fff, 0px 0px 50px #fff, 0px 0px 50px #fff,\n        0px 0px 50px #7b96b8, 0px 0px 150px #7b96b8, 0px 10px 100px #7b96b8, 0px 10px 100px #7b96b8,\n        0px 10px 100px #7b96b8, 0px 10px 100px #7b96b8, 0px -10px 100px #7b96b8, 0px -10px 100px #7b96b8;\n    }\n  }\n"]))),yt=f.default.div(bt||(bt=Object(i.a)(["\n  padding: 15px;\n"]))),At=f.default.h2(xt||(xt=Object(i.a)(["\n  font-size: 16px;\n  text-transform: capitalize;\n  color: #ffffff;\n  margin-bottom: 10px;\n"]))),It=f.default.div(jt||(jt=Object(i.a)(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  align-items: center;\n"]))),Nt=f.default.h3(ht||(ht=Object(i.a)(["\n  color: #f4c708;\n  font-size: 24px;\n  font-family: 'Roboto Mono', monospace !important;\n  font-weight: 600;\n  position: relative;\n  transform: scale(1);\n  text-shadow: -1px 0 1px #c5a354, 0 1px 1px #e0b649, 5px 5px 10px rgb(179 167 106 / 78%),\n    -5px -5px 10px rgb(183 155 65 / 40%);\n\n  &:before {\n    content: attr(data-heading);\n    left: 0;\n    top: 0;\n    position: absolute;\n    z-index: 1;\n    background: linear-gradient(\n      to bottom,\n      #ffe047 22%,\n      #fff144 24%,\n      #cfc09f 26%,\n      #ffe686 27%,\n      #ffecb3 40%,\n      #ffe14f 78%\n    );\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    text-shadow: none;\n  }\n"]))),Dt=f.default.div(mt||(mt=Object(i.a)(["\n  background: url('../images/staking/bg-button.png') no-repeat center center;\n  background-size: contain;\n  width: 100%;\n  height: 36px;\n  text-transform: uppercase;\n  text-align: center;\n  line-height: 36px;\n  font-size: 14px;\n  font-weight: 600;\n"]))),Ct=function(e){var t=e.image,n=e.contractAddress,r=e.pendingReward,a=e.tokenID,c=e.onHarvest,i=e.onConfirmWithdraw,o=(e.createdAt,e.isTxPending);return Object(m.jsx)(be.a,{sm:"12",md:"3",className:"align-center space-mb",children:Object(m.jsxs)(gt,{children:[Object(m.jsxs)(Ot,{children:[Object(m.jsx)("img",{src:t,className:"thumb",alt:""}),Object(m.jsx)("img",{src:"/images/staking/box-img.png",alt:"",className:"line-box"})]}),Object(m.jsx)(vt,{children:Object(m.jsx)("img",{src:"/images/staking/effect.png",alt:""})}),Object(m.jsxs)(kt,{children:[o?Object(m.jsx)(wt,{className:"green-color",children:Object(m.jsx)("span",{className:"effect-light",children:"Withdrawing..."})}):Object(m.jsx)(wt,{className:"green-color",children:Object(m.jsx)("span",{className:"effect-light",children:"Staking"})}),!o&&Object(m.jsxs)(yt,{children:[Object(m.jsx)(At,{children:"Collected Reward:"}),Object(m.jsxs)(It,{children:[Object(m.jsx)(Nt,{"data-heading":"",children:r}),Object(m.jsx)(Dt,{onClick:function(){return c({tokenID:a,contractAddress:n})},children:"claim"}),Object(m.jsx)(Dt,{onClick:i,children:"withdraw"})]})]})]})]})})};function Tt(e){var t=e.currency,n=e.depositAmount,r=e.rewardAmount,a=e.onWithdraw,c=e.harvestFee,i=Ge.CurrencyAmount.fromRawAmount(t,Object(qe.d)(null===r||void 0===r?void 0:r.raw,c));return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(et.b,{children:[Object(m.jsx)(Qe.wb,{children:"XLUCKY Deposited"}),Object(m.jsxs)(et.c,{children:[Object(m.jsx)(tt.a,{currency:t,style:{marginRight:"8px"}}),Object(m.jsx)(Qe.wb,{children:null===n||void 0===n?void 0:n.toSignificant(6)})]})]}),Object(m.jsxs)(et.b,{children:[Object(m.jsx)(Qe.wb,{children:"XLUCKY Reward"}),Object(m.jsxs)(et.c,{children:[Object(m.jsx)(tt.a,{currency:t,style:{marginRight:"8px"}}),Object(m.jsx)(Qe.wb,{children:null===r||void 0===r?void 0:r.toSignificant(6)})]})]}),Object(m.jsxs)(et.b,{children:[Object(m.jsx)(Qe.wb,{children:"Fee (in percent)"}),Object(m.jsx)(et.c,{children:Object(m.jsxs)(Qe.wb,{children:[c,"%"]})})]}),Object(m.jsxs)(et.b,{children:[Object(m.jsx)(Qe.wb,{children:"Fee"}),Object(m.jsxs)(et.c,{children:[Object(m.jsx)(tt.a,{currency:t,style:{marginRight:"8px"}}),Object(m.jsx)(Qe.wb,{children:null===i||void 0===i?void 0:i.toSignificant(6)})]})]}),Object(m.jsx)(Qe.l,{mt:"20px",onClick:a,className:"btn-supply",children:"Withdraw"})]})}var St,Rt,zt,Et,Pt,Ft=function(e){var t,n,r=e.stakingTokens,a=e.changeViewWhenWithdraw,c=Object(oe.a)().chainId,i=function(e){for(var t=Object(Ze.y)(),n=Object(oe.a)().chainId,r=Object(ct.d)(at.p[n]),a=Object(u.useMemo)((function(){return e?e.map((function(e){return Object(M.a)(Object(M.a)({},e),{},{contractAddress:Object(ot.g)(e.contractAddress)})})).filter((function(e){return!1!==e.contractAddress})).sort():[]}),[e]),c=Object(it.d)(t,"pendingReward",a.map((function(e){return[e.contractAddress,e.tokenID]}))),i=[],o=0;o<c.length;o++){var s,p,d=null===c||void 0===c||null===(s=c[o])||void 0===s||null===(p=s.result)||void 0===p?void 0:p[0];d&&i.push(Ge.CurrencyAmount.fromRawAmount(r,Ge.JSBI.BigInt(d.toString())))}return i}(r),s=Object(Ze.y)(),p=Object(u.useState)(!1),d=Object(o.a)(p,2),f=d[0],l=d[1],b=Object(u.useState)(""),x=Object(o.a)(b,2),j=x[0],h=x[1],g=Object(st.f)(j),O=Object(st.e)(j),v=Object(st.g)(),k=Object(u.useState)(!1),w=Object(o.a)(k,2),y=w[0],A=w[1],I=Object(ct.d)(at.p[c]),N=Object(u.useState)(null),D=Object(o.a)(N,2),C=D[0],T=D[1],S=rt(),R=function(){var e=Object(Ze.y)(),t=Object(u.useState)(""),n=Object(o.a)(t,2),r=n[0],a=n[1],c=Object(st.g)();return[Object(st.f)(r),Object(st.e)(r),Object(u.useCallback)(function(){var t=Object(F.a)(P.a.mark((function t(n){var r,i;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.tokenID,i=n.contractAddress,r||i){t.next=3;break}return t.abrupt("return");case 3:e.harvest(i,r).then((function(e){c(e,{summary:"\n            Claim reward from staking token ".concat(r,"\n          ")}),a(e.hash)})).catch((function(e){le("error",{message:"Error",description:null===e||void 0===e?void 0:e.message})}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e,c])]}(),z=Object(o.a)(R,3),E=(z[0],z[1],z[2]);Object(u.useEffect)((function(){if(O){var e=C.tokenID,t=C.contractAddress;a({tokenID:e,contractAddress:t})}}),[O,a,C]);var B=function(){var e=Object(F.a)(P.a.mark((function e(){var t,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l(!0),t=C.tokenID,n=C.contractAddress,s.withdraw(n,t).then((function(e){l(!1),v(e,{summary:"\n            Withdraw token ".concat(t,"\n          ")}),h(e.hash)})).catch((function(e){l(!1),le("error",{message:"Error",description:null===e||void 0===e?void 0:e.message})}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=Object(u.useCallback)((function(){A(!1)}),[]),V=function(){return Object(m.jsxs)($e.a,{gap:"20px",children:[Object(m.jsxs)(et.d,{style:{marginTop:"20px"},children:[Object(m.jsx)(Qe.wb,{fontSize:"48px",mr:"8px",children:(null===C||void 0===C?void 0:C.depositAmount).add(null===C||void 0===C?void 0:C.pendingReward).subtract(Ge.CurrencyAmount.fromRawAmount(I,Object(qe.d)((null===C||void 0===C?void 0:C.pendingReward).raw,S))).toFixed(4)}),Object(m.jsx)(tt.a,{currency:I})]}),Object(m.jsx)(Qe.wb,{small:!0,textAlign:"left",padding:"8px 0 0 0 ",style:{fontStyle:"italic"},children:"Amount of XLUCKY you receive will increase a little bit"})]})},Y=function(){return Object(m.jsx)(Tt,{currency:I,depositAmount:null===C||void 0===C?void 0:C.depositAmount,rewardAmount:null===C||void 0===C?void 0:C.pendingReward,harvestFee:S,onWithdraw:B})},K="You will receive ".concat(null===C||void 0===C||null===(t=C.depositAmount)||void 0===t?void 0:t.toSignificant(6)," as deposited and ").concat(null===C||void 0===C||null===(n=C.pendingReward)||void 0===n?void 0:n.toSignificant(6)," as reward.\n  Staking contract will also transfer ownership of this token to you\n  ");return Object(m.jsxs)(W.a,{children:[Object(m.jsx)(nt.c,{isOpen:y,onDismiss:U,attemptingTxn:f,hash:j,content:function(){return Object(m.jsx)(nt.a,{title:"You will receive",onDismiss:U,topContent:V,bottomContent:Y})},pendingText:K}),r.map((function(e,t){return Object(m.jsx)(Ct,{image:e.image,contractAddress:e.contractAddress,tokenID:e.tokenID,pendingReward:i[t]?i[t].toFixed(4):"0.0000",onHarvest:E,onConfirmWithdraw:function(){A(!0),T(Object(M.a)(Object(M.a)({},e),{},{pendingReward:i[t],depositAmount:Ge.CurrencyAmount.fromRawAmount(I,Object(qe.c)(e.depositAmount))}))},createdAt:e.createdAt,isTxPending:g})}))]})},Wt=n(192),Bt=n(41),Mt=n(602);function Ut(e){var t=e.currency,n=e.depositAmount,r=e.onStake,a=e.rateReward;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(et.b,{children:[Object(m.jsx)(Qe.wb,{children:"XLUCKY Deposited"}),Object(m.jsxs)(et.c,{children:[Object(m.jsx)(tt.a,{currency:t,style:{marginRight:"8px"}}),Object(m.jsx)(Qe.wb,{children:null===n||void 0===n?void 0:n.toSignificant(6)})]})]}),Object(m.jsxs)(et.b,{children:[Object(m.jsx)(Qe.wb,{children:"Rate reward (per year)"}),Object(m.jsxs)(et.c,{children:[Object(m.jsx)(tt.a,{currency:t,style:{marginRight:"8px"}}),Object(m.jsxs)(Qe.wb,{children:[a,"%"]})]})]}),Object(m.jsx)(Qe.l,{mt:"20px",onClick:r,className:"btn-supply",children:"Stake"})]})}var Vt,Yt=f.default.div(St||(St=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  max-width: auto;\n\n  @media (min-width: 768px) {\n    max-width: 230px;\n  }\n"]))),Kt=f.default.div(Rt||(Rt=Object(i.a)(["\n  position: relative;\n  width: 180px;\n  height: 276px;\n  overflow: hidden;\n\n  .thumb {\n    height: inherit;\n    transform: scale(1);\n    transition: all 0.9s;\n    object-fit: cover;\n  }\n\n  .line-box {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 2;\n  }\n"]))),Lt=f.default.div(zt||(zt=Object(i.a)(["\n  margin-bottom: 15px;\n"]))),Gt=f.default.div(Et||(Et=Object(i.a)(["\n  background: #2f2f2f;\n  border-bottom-left-radius: 12px;\n  border-bottom-right-radius: 12px;\n  width: 280px;\n\n  @media (min-width: 768px) {\n    width: 100%;\n  }\n"]))),Xt=f.default.button(Pt||(Pt=Object(i.a)(["\n  background: url('../images/staking/line-button.png') no-repeat center center;\n  background-size: contain;\n  width: 100%;\n  height: 67px;\n  line-height: 67px;\n  font-size: 20px;\n  font-weight: 700;\n  text-transform: uppercase;\n  text-align: center;\n  color: #ff3b3b;\n  border: 0;\n\n  &.green-color {\n    color: #1cbb1c;\n  }\n\n  &:hover {\n    .effect-light {\n      text-align: center;\n      font-size: 1.2em;\n      color: #fff;\n      font-weight: 700;\n      text-transform: uppercase;\n      animation: blur 0.75s ease-out infinite;\n      text-shadow: 0px 0px 5px #fff, 0px 0px 7px #fff;\n    }\n  }\n\n  @keyframes blur {\n    from {\n      text-shadow: 0px 0px 10px #fff, 0px 0px 10px #fff, 0px 0px 25px #fff, 0px 0px 25px #fff, 0px 0px 25px #fff,\n        0px 0px 25px #fff, 0px 0px 25px #fff, 0px 0px 25px #fff, 0px 0px 50px #fff, 0px 0px 50px #fff,\n        0px 0px 50px #7b96b8, 0px 0px 150px #7b96b8, 0px 10px 100px #7b96b8, 0px 10px 100px #7b96b8,\n        0px 10px 100px #7b96b8, 0px 10px 100px #7b96b8, 0px -10px 100px #7b96b8, 0px -10px 100px #7b96b8;\n    }\n  }\n"]))),_t=function(e){var t=e.image,n=e.contractAddress,r=e.tokenID,a=e.approveState,c=e.onApprove,i=e.changeViewWhenStake,s=e.depositAmount,p=Object(oe.a)().chainId,d=Object(Ze.y)(),f=Object(u.useState)(""),l=Object(o.a)(f,2),b=l[0],x=l[1],j=Object(st.g)(),h=function(e,t,n){var r=Object(Mt.a)(e,t),a=Object(Ze.q)(t),c=Object(st.d)(e,t,Object(Bt.a)(Y.a.stakingNft)),i=Object(u.useMemo)((function(){return e&&t&&n&&r?r!==n?c?at.a.PENDING:at.a.NOT_APPROVED:at.a.APPROVED:at.a.UNKNOWN}),[e,t,n,r,c]),o=Object(st.g)(),s=Object(u.useCallback)(Object(F.a)(P.a.mark((function r(){var c;return P.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i===at.a.NOT_APPROVED){r.next=3;break}return console.error("approve was called unnecessarily"),r.abrupt("return");case 3:if(e){r.next=6;break}return console.error("no token id"),r.abrupt("return");case 6:if(t){r.next=9;break}return console.error("contract address is null"),r.abrupt("return");case 9:if(n){r.next=12;break}return console.error("no spender"),r.abrupt("return");case 12:return r.next=14,a.estimateGas.approve(n,e).catch((function(){return a.estimateGas.approve(n,e)}));case 14:return c=r.sent,r.abrupt("return",a.approve(n,e,{gasLimit:Object(ot.b)(c)}).then((function(r){o(r,{summary:"Approve ".concat(e," to staking contract"),approvalNFT:{tokenID:e,contractAddress:t,spender:n}})})).catch((function(e){throw console.error("Failed to approve token",e),e})));case 16:case"end":return r.stop()}}),r)}))),[i,e,t,a,n,o]);return[i,s]}(r,n,d.address),g=Object(o.a)(h,2),O=g[0],v=g[1],k=Object(st.e)(b),w=Object(st.f)(b),y=Object(u.useState)(!1),A=Object(o.a)(y,2),I=A[0],N=A[1],D=Object(u.useState)(!1),C=Object(o.a)(D,2),T=C[0],S=C[1],R=Object(ct.d)(at.p[p]),z=Object(u.useState)(0),E=Object(o.a)(z,2),W=E[0],B=E[1];Object(u.useEffect)((function(){k&&pe.stakeToken({tokenID:r,contractAddress:n}).then((function(){i({tokenID:r,contractAddress:n})})).catch((function(e){return le("error",{message:"Error",description:null===e||void 0===e?void 0:e.message})}))}),[k,r,n,i]),Object(u.useEffect)((function(){r&&n&&function(){var e=Object(F.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pe.getTokenByID({tokenID:r,contractAddress:n});case 3:t=e.sent,B(parseInt(t.rateReward)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),le("error",{message:"Get token from db error",description:null===e.t0||void 0===e.t0?void 0:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()()}),[r,n]);var M=function(){var e=Object(F.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,N(!0),e.next=4,d.stake(Xe.a.utils.getAddress(n),Xe.a.BigNumber.from(r));case 4:t=e.sent,N(!1),j(t,{summary:"Stake NFT ".concat(r," from ").concat(n)}),x(t.hash),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),N(!1),le("error",{message:"Error",description:null===e.t0||void 0===e.t0?void 0:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),U=Object(u.useCallback)((function(){S(!1)}),[]),V=function(){return Object(m.jsxs)($e.a,{gap:"20px",children:[Object(m.jsxs)(et.d,{style:{marginTop:"20px"},children:[Object(m.jsx)(Qe.wb,{fontSize:"48px",mr:"8px",children:s.toSignificant(6)}),Object(m.jsx)(tt.a,{currency:R})]}),Object(m.jsx)(Qe.wb,{small:!0,textAlign:"left",padding:"8px 0 0 0 ",style:{fontStyle:"italic"},children:"You will receive deposit when you withdraw"})]})},K=function(){return Object(m.jsx)(Ut,{currency:R,rateReward:W,depositAmount:s,onStake:M})};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(nt.c,{isOpen:T,onDismiss:U,attemptingTxn:I,hash:b,content:function(){return Object(m.jsx)(nt.a,{title:"You will stake this token and transfer to staking contract as deposit",onDismiss:U,topContent:V,bottomContent:K})},pendingText:"You are transferring ownership of this token to staking contract and number of XLUCKY to deposit"}),Object(m.jsx)(be.a,{sm:"12",md:"3",className:"align-center space-mb",children:Object(m.jsxs)(Yt,{children:[Object(m.jsxs)(Kt,{children:[Object(m.jsx)("img",{src:t,className:"thumb",alt:""}),Object(m.jsx)("img",{src:"/images/staking/box-img.png",alt:"",className:"line-box"})]}),Object(m.jsx)(Lt,{children:Object(m.jsx)("img",{src:"/images/staking/effect.png",alt:""})}),Object(m.jsxs)(Gt,{children:[a===at.a.NOT_APPROVED?Object(m.jsx)(Xt,{className:"green-color",onClick:c,children:Object(m.jsx)("span",{className:"effect-light",children:"Approve XLUCKY"})}):a===at.a.PENDING?Object(m.jsx)(Xt,{className:"green-color",children:Object(m.jsx)("span",{className:"effect-light",children:"Approving..."})}):a===at.a.UNKNOWN?Object(m.jsx)(Xt,{className:"green-color",children:Object(m.jsx)("span",{className:"effect-light",children:"Checking..."})}):Object(m.jsx)(m.Fragment,{children:" "}),O===at.a.NOT_APPROVED?Object(m.jsx)(Xt,{className:"green-color",onClick:function(){return v()},children:Object(m.jsx)("span",{className:"effect-light",children:"Approve NFT"})}):O===at.a.PENDING?Object(m.jsx)(Xt,{className:"green-color",children:Object(m.jsx)("span",{className:"effect-light",children:"Approving NFT..."})}):O===at.a.UNKNOWN?Object(m.jsx)(Xt,{className:"green-color",children:Object(m.jsx)("span",{className:"effect-light",children:"Checking..."})}):Object(m.jsx)(m.Fragment,{children:" "}),a===at.a.APPROVED&&O===at.a.APPROVED&&(w||k?Object(m.jsx)(Xt,{className:"green-color",children:Object(m.jsx)("span",{className:"effect-light",children:"Staking...."})}):Object(m.jsx)(Xt,{onClick:function(){S(!0)},className:"green-color",children:Object(m.jsx)("span",{className:"effect-light",children:"Stake"})}))]})]})})]})},Jt=function(e){var t=e.approvedTokens,n=e.maxDepositAmount,r=e.changeViewWhenStake,a=Object(Ze.y)(),c=Object(oe.a)().chainId,i=Object(ct.d)(at.p[c]),s=Object(Wt.a)(Ge.CurrencyAmount.fromRawAmount(i,n),null===a||void 0===a?void 0:a.address),u=Object(o.a)(s,2),p=u[0],d=u[1],f=function(){d().catch((function(e){le("error",{message:"Error",description:null===e||void 0===e?void 0:e.message})}))};return Object(m.jsx)(W.a,{children:t.map((function(e){return Object(m.jsx)(_t,{image:e.image,contractAddress:e.contractAddress,tokenID:e.tokenID,changeViewWhenStake:r,approveState:p,onApprove:f,depositAmount:Ge.CurrencyAmount.fromRawAmount(i,Object(qe.c)(null===e||void 0===e?void 0:e.depositAmount))})}))})},Ht=function(e){var t=e.myTokens,n=e.activeTab,r=Object(u.useState)([]),a=Object(o.a)(r,2),c=a[0],i=a[1],s=Object(u.useState)([]),p=Object(o.a)(s,2),f=p[0],l=p[1],b=Object(u.useState)(Ge.JSBI.BigInt(0)),x=Object(o.a)(b,2),j=x[0],h=x[1],g=Object(u.useRef)(!1),O=Object(oe.a)().account,v=Object(Ze.y)();Object(u.useEffect)((function(){var e=function(){var e=Object(F.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v&&v.getAllPools().then((function(e){var n=e.map((function(e){return Object(M.a)(Object(M.a)({},e),{},{tokenID:e.tokenID.toNumber(),createdAt:new Date(1e3*e.createdAt)})}));l(n.filter((function(e){return e.owner===Xe.a.constants.AddressZero&&Je(t,e.contractAddress,e.tokenID)}))),i(n.filter((function(e){return e.owner===O})))})).catch((function(e){return le("error",{message:"Error",description:null===e||void 0===e?void 0:e.message})}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();O&&t.length>0&&v&&("3"===n||"4"===n)&&!g.current&&(e(),g.current=!0)}),[v,O,t,g,n]),Object(u.useEffect)((function(){var e=function(e,t){if(0===e.length)return 0;for(var n=e[0][t],r=1;r<e.length;r++)e[r][t]>n&&(n=e[r][t]);return n}(f,"depositAmount");h(Object(qe.f)(e))}),[f]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(d.a,{tabId:"3",children:f.length>0&&Object(m.jsx)(Jt,{changeViewWhenStake:function(e){var t=e.tokenID,n=e.contractAddress;l((function(e){return e.filter((function(e){return e.tokenID!==t&&e.contractAddress!==n}))})),i((function(e){return[].concat(Object(Le.a)(e),[Object(M.a)(Object(M.a)({},He(f,n,t)),{},{owner:O,createdAt:new Date(Date.now())})])}))},approvedTokens:f,maxDepositAmount:j})}),Object(m.jsx)(d.a,{tabId:"4",children:c.length>0&&Object(m.jsx)(Ft,{changeViewWhenWithdraw:function(e){var t=e.tokenID,n=e.contractAddress;i((function(e){return e.filter((function(e){return e.tokenID!==t&&e.contractAddress!==n}))})),l((function(e){return[].concat(Object(Le.a)(e),[Object(M.a)(Object(M.a)({},He(c,n,t)),{},{owner:Xe.a.constants.AddressZero})])}))},stakingTokens:c})})]})},qt=f.default.div(Vt||(Vt=Object(i.a)(["\n  .align-center {\n    display: unset;\n\n    @media (min-width: 768px) {\n      display: flex;\n      justify-content: center;\n    }\n\n    &:hover {\n      cursor: pointer;\n\n      .thumb {\n        transform: scale(0.9);\n        transition: all 0.9s;\n      }\n\n      .effect-light {\n        text-align: center;\n        font-size: 1.2em;\n        color: #fff;\n        font-weight: 700;\n        text-transform: uppercase;\n        animation: blur 0.75s ease-out infinite;\n        text-shadow: 0px 0px 5px #fff, 0px 0px 7px #fff;\n      }\n    }\n  }\n\n  .space-mb {\n    margin-bottom: 40px;\n\n    @media (max-width: 768px) {\n      margin-bottom: 40px;\n      padding-bottom: 40px;\n      border-bottom: 1px solid #ffffff57;\n\n      &:last-child {\n        border: none;\n      }\n    }\n  }\n"])));t.default=function(){var e=Object(u.useState)("1"),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(u.useState)([]),c=Object(o.a)(a,2),i=c[0],f=c[1];return Object(m.jsx)(s.a,{children:Object(m.jsxs)(qt,{children:[Object(m.jsx)(g,{activeTab:n,toggle:function(e){n!==e&&r(e)}}),Object(m.jsxs)(p.a,{activeTab:n,children:[Object(m.jsx)(d.a,{tabId:"1",children:Object(m.jsx)(Be,{activeTab:n,setMyTokens:f})}),Object(m.jsx)(d.a,{tabId:"2",children:Object(m.jsx)(Ke,{activeTab:n})}),Object(m.jsx)(Ht,{activeTab:n,myTokens:i})]})]})})}}}]);
//# sourceMappingURL=25.03f70e31.chunk.js.map
(this["webpackJsonpluckyswap-exchange-v2"]=this["webpackJsonpluckyswap-exchange-v2"]||[]).push([[25],{1655:function(e,n,t){"use strict";t.r(n);var r,a,c,i=t(12),o=t(15),s=t(203),u=t(0),p=t(1267),d=t(1268),f=t(3),l=t(43),x=t.n(l),b=t(1263),j=t(1264),h=t(1265),m=t(1);function g(e){var n=e.activeTab,t=e.toggle;return Object(m.jsx)(T,{children:Object(m.jsxs)(b.a,{tabs:!0,children:[Object(m.jsx)(R,{children:Object(m.jsx)(j.a,{children:Object(m.jsx)(h.a,{className:x()({active:"1"===n}),onClick:function(){return t("1")},children:"all cards"})})}),Object(m.jsxs)(z,{children:[Object(m.jsx)(j.a,{children:Object(m.jsx)(h.a,{className:x()({active:"1"===n}),onClick:function(){return t("1")},children:"My Collection"})}),Object(m.jsx)(j.a,{children:Object(m.jsx)(h.a,{className:x()({active:"2"===n}),onClick:function(){return t("2")},children:"Pending"})}),Object(m.jsx)(j.a,{children:Object(m.jsx)(h.a,{className:x()({active:"3"===n}),onClick:function(){return t("3")},children:"unstaked"})}),Object(m.jsx)(j.a,{children:Object(m.jsx)(h.a,{className:x()({active:"4"===n}),onClick:function(){return t("4")},children:"staked"})})]})]})})}var O,v,k,w,y,A,I,N,D,C,S,T=f.default.div(r||(r=Object(i.a)(["\n  margin-top: 20px;\n\n  .nav-tabs {\n    // display: grid;\n    // grid-template-columns: 1fr 239px;\n    display: flex;\n    justify-content: space-between;\n    border-color: transparent;\n    border-bottom: 1px solid #ffffff8b !important;\n  }\n\n  .nav-link {\n    text-transform: capitalize;\n\n    @media (max-width: 768px) {\n      font-size: 16px;\n      white-space: nowrap;\n    }\n\n    &.active {\n      color: #f4c706 !important;\n      border-bottom: none !important;\n    }\n  }\n"]))),R=f.default.div(a||(a=Object(i.a)([""]))),z=f.default.div(c||(c=Object(i.a)(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  justify-items: end;\n"]))),E=t(2),P=t.n(E),F=t(18),W=t(1269),B=t(20),M=t(14),U=t(123),V=t.n(U),Y=(t(589),t(590),t(96)),K=t(172),L=t(89),G=(t(151),t(35),[{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}]),X=function(){var e=Object(F.a)(P.a.mark((function e(n){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=2;break}return e.abrupt("return",fetch("https://api-testnet.bscscan.com/api?module=account&action=tokennfttx&address=".concat(n,"&startblock=0&endblock=999999999999&sort=asc")).then((function(e){return e.json()})).then((function(e){return e.result.map((function(e){return Object(M.a)(Object(M.a)({},e),{},{tokenID:parseInt(e.tokenID),contractAddress:Object(K.getAddress)(e.contractAddress)})}))})).catch((function(e){return new Promise((function(e){return e([])}))})));case 2:return e.abrupt("return",new Promise((function(e){return e([])})));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),_="LUCKY_MARKETPLACE",H="AIRNFTS",J="BRNFT",q=(O={},Object(B.a)(O,Object(K.getAddress)("0x969a82989d9e410ed0ae36c12479552421c93eb2"),_),Object(B.a)(O,Object(K.getAddress)("0xF5db804101d8600c26598A1Ba465166c33CdAA4b"),H),Object(B.a)(O,Object(K.getAddress)("0x1dDB2C0897daF18632662E71fdD2dbDC0eB3a9Ec"),J),O),Z=function(){var e=Object(F.a)(P.a.mark((function e(n){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{image:n});case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Q=function(){var e=Object(F.a)(P.a.mark((function e(n){var t,r,a,c,i,o;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V.a.get(n);case 3:return t=e.sent,r=t.data,a=null===r||void 0===r?void 0:r.nft,c=a.urlCompressed,i=a.name,o=a.description,e.abrupt("return",{image:c,name:i,description:o});case 9:return e.prev=9,e.t0=e.catch(0),console.log("get info airnft error : ",e.t0),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}(),$=function(){var e=Object(F.a)(P.a.mark((function e(n){var t,r,a,c,i;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V.a.get(n);case 3:return t=e.sent,r=t.data,a=r.name,c=r.description,i=r.image,e.abrupt("return",{name:a,description:c,image:i});case 9:return e.prev=9,e.t0=e.catch(0),console.log("get image brnft error : ",e.t0),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}(),ee=function(){var e=Object(F.a)(P.a.mark((function e(n){var t,r,a,c,i;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V.a.get(n);case 3:return t=e.sent,r=t.data,a=r.name,c=r.description,i=r.image,e.abrupt("return",{name:a,description:c,image:i});case 9:return e.prev=9,e.t0=e.catch(0),console.log("get image bakery error : ",e.t0),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}(),ne=function(){var e=Object(F.a)(P.a.mark((function e(n){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(n.map(function(){var e=Object(F.a)(P.a.mark((function e(n){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=q[n.contractAddress],e.next=e.t0===_?3:e.t0===H?4:e.t0===J?5:6;break;case 3:return e.abrupt("return",Z(n.uri));case 4:return e.abrupt("return",Q(n.uri));case 5:return e.abrupt("return",$(n.uri));case 6:return e.abrupt("return",ee(n.uri));case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),te=function(){var e=Object(F.a)(P.a.mark((function e(n){var t,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=n.map((function(e){return{address:e.contractAddress,name:"tokenURI",params:[e.tokenID]}})),e.next=4,Object(L.b)(G,t,{requireSuccess:!1});case 4:return r=(r=e.sent).flat(),e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}(),re=function(){var e=Object(F.a)(P.a.mark((function e(n){var t,r,a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(n);case 2:return t=e.sent,r=t.map((function(e,t){return{uri:e,contractAddress:n[t].contractAddress}})),e.next=6,ne(r);case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ae=function(e,n){for(var t=[],r=0;r<e.length;r++){for(var a=e[r],c=!1,i=0;i<n.length;i++)if(Object(K.getAddress)(n[i].contractAddress)===a.contractAddress&&n[i].tokenID===a.tokenID){c=!0;break}c||t.push(a)}return t},ce=function(e,n){for(var t,r=new Map,a=[],c=e.length-1;c>=0;c--){var i=(t=e[c],"".concat(t.tokenID,"-").concat(t.contractAddress));r.get(i)||Object(K.getAddress)(e[c].to)!==n||a.push(e[c]),r.set(i,1)}return a},ie=function(){var e=Object(F.a)(P.a.mark((function e(n){var t,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re(n);case 2:for(t=e.sent,r=0;r<n.length;r++)Object.assign(n[r],t[r]);return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),oe=t(23),se=t(6),ue=t(10),pe=new(function(){function e(n){Object(se.a)(this,e),this.restConnector=void 0,this.restConnector=n.restConnector}return Object(ue.a)(e,[{key:"getAllTokens",value:function(){var e=Object(F.a)(P.a.mark((function e(){var n,t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.restConnector.get("/stakingNft");case 2:return n=e.sent,t=n.data,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAllTokensId",value:function(){var e=Object(F.a)(P.a.mark((function e(){var n,t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.restConnector.get("/stakingNft/poolsId");case 3:return n=e.sent,t=n.data,e.abrupt("return",t);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"getPendingTokens",value:function(){var e=Object(F.a)(P.a.mark((function e(){var n,t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.restConnector.get("/stakingNft?status=pending");case 2:return n=e.sent,t=n.data,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getApprovedTokens",value:function(){var e=Object(F.a)(P.a.mark((function e(){var n,t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.restConnector.get("/stakingNft?status=approve");case 2:return n=e.sent,t=n.data,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getStakingTokens",value:function(){var e=Object(F.a)(P.a.mark((function e(){var n,t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.restConnector.get("/stakingNft?status=staking");case 2:return n=e.sent,t=n.data,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"registerStakingToken",value:function(){var e=Object(F.a)(P.a.mark((function e(n){var t,r,a,c,i,o;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.name,r=n.description,a=n.urlToken,c=n.image,i=n.tokenID,o=n.contractAddress,!(t&&r&&a&&c&&i&&o)){e.next=3;break}return e.abrupt("return",this.restConnector.post("/stakingNft",{name:t,description:r,urlToken:a,image:c,tokenID:i,contractAddress:o}));case 3:throw new Error("Not have enough info token");case 4:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"stakeToken",value:function(){var e=Object(F.a)(P.a.mark((function e(n){var t,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.tokenID,r=n.contractAddress,e.abrupt("return",this.restConnector.patch("/stakingNft/",{tokenID:t,contractAddress:r,status:"staking"}));case 2:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"getTokenByID",value:function(){var e=Object(F.a)(P.a.mark((function e(n){var t,r,a,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.tokenID,r=n.contractAddress,e.next=3,this.restConnector.get("/stakingNft?tokenID=".concat(t,"&contractAddress=").concat(r));case 3:return a=e.sent,c=a.data,e.abrupt("return",c[0]);case 6:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()}]),e}())({restConnector:V.a.create({baseURL:"http://localhost:3004/"})}),de=t(1643),fe=function(e){return{success:{color:"rgba(0, 0, 0, 0.65)",border:"1px solid #b7eb8f",backgroundColor:"#f6ffed"},warning:{color:"rgba(0, 0, 0, 0.65)",border:"1px solid #ffe58f",backgroundColor:"#fffbe6"},error:{color:"rgba(0, 0, 0, 0.65)",border:"1px solid #ffa39e",backgroundColor:"#fff1f0"},info:{color:"rgba(0, 0, 0, 0.65)",border:"1px solid #91d5ff",backgroundColor:"#e6f7ff"},open:{color:"rgba(0, 0, 0, 0.65)",border:"1px solid #91d5ff",backgroundColor:"#e6f7ff"}}[e]},le=function(e,n){var t=n.message,r=n.description,a=n.duration,c=void 0===a?3:a;de.a[e]({message:t,description:r,style:fe(e),duration:c})},xe=t(1266),be=f.default.div(v||(v=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  max-width: auto;\n\n  @media (min-width: 768px) {\n    max-width: 230px;\n  }\n"]))),je=f.default.div(k||(k=Object(i.a)(["\n  position: relative;\n  width: 180px;\n  height: 276px;\n  overflow: hidden;\n\n  .thumb {\n    height: inherit;\n    transform: scale(1);\n    transition: all 0.9s;\n    object-fit: cover;\n  }\n\n  .line-box {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 2;\n  }\n"]))),he=f.default.div(w||(w=Object(i.a)(["\n  margin-bottom: 15px;\n"]))),me=f.default.div(y||(y=Object(i.a)(["\n  background: #2f2f2f;\n  border-bottom-left-radius: 12px;\n  border-bottom-right-radius: 12px;\n  width: 280px;\n\n  @media (min-width: 768px) {\n    width: 100%;\n  }\n"]))),ge=(f.default.button(A||(A=Object(i.a)(["\n  background: url('../images/staking/line-button.png') no-repeat center center;\n  background-size: contain;\n  width: 100%;\n  height: 67px;\n  line-height: 67px;\n  font-size: 20px;\n  font-weight: 700;\n  text-transform: uppercase;\n  text-align: center;\n  color: #ff3b3b;\n  border: 0;\n\n  &.green-color {\n    color: #1cbb1c;\n  }\n\n  &:hover {\n    .effect-light {\n      text-align: center;\n      font-size: 1.2em;\n      color: #fff;\n      font-weight: 700;\n      text-transform: uppercase;\n      animation: blur 0.75s ease-out infinite;\n      text-shadow: 0px 0px 5px #fff, 0px 0px 7px #fff;\n    }\n  }\n\n  @keyframes blur {\n    from {\n      text-shadow: 0px 0px 10px #fff, 0px 0px 10px #fff, 0px 0px 25px #fff, 0px 0px 25px #fff, 0px 0px 25px #fff,\n        0px 0px 25px #fff, 0px 0px 25px #fff, 0px 0px 25px #fff, 0px 0px 50px #fff, 0px 0px 50px #fff,\n        0px 0px 50px #7b96b8, 0px 0px 150px #7b96b8, 0px 10px 100px #7b96b8, 0px 10px 100px #7b96b8,\n        0px 10px 100px #7b96b8, 0px 10px 100px #7b96b8, 0px -10px 100px #7b96b8, 0px -10px 100px #7b96b8;\n    }\n  }\n"]))),f.default.div(I||(I=Object(i.a)(["\n  padding: 15px;\n"])))),Oe=(f.default.h2(N||(N=Object(i.a)(["\n  font-size: 16px;\n  text-transform: capitalize;\n  color: #ffffff;\n  margin-bottom: 10px;\n"]))),f.default.div(D||(D=Object(i.a)(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  align-items: center;\n"]))),f.default.h3(C||(C=Object(i.a)(["\n  color: #f4c708;\n  font-size: 24px;\n  font-family: 'Roboto Mono', monospace !important;\n  font-weight: 600;\n  position: relative;\n  transform: scale(1);\n  text-shadow: -1px 0 1px #c5a354, 0 1px 1px #e0b649, 5px 5px 10px rgb(179 167 106 / 78%),\n    -5px -5px 10px rgb(183 155 65 / 40%);\n\n  &:before {\n    content: attr(data-heading);\n    left: 0;\n    top: 0;\n    position: absolute;\n    z-index: 1;\n    background: linear-gradient(\n      to bottom,\n      #ffe047 22%,\n      #fff144 24%,\n      #cfc09f 26%,\n      #ffe686 27%,\n      #ffecb3 40%,\n      #ffe14f 78%\n    );\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    text-shadow: none;\n  }\n"]))),f.default.div(S||(S=Object(i.a)(["\n  background: url('../images/staking/bg-button.png') no-repeat center center;\n  background-size: contain;\n  width: 100%;\n  height: 36px;\n  text-transform: uppercase;\n  text-align: center;\n  line-height: 36px;\n  font-size: 14px;\n  font-weight: 600;\n"])))),ve=function(e){var n=e.name,t=e.description,r=e.tokenID,a=e.contractAddress,c=e.image,i=e.onRegister;return Object(m.jsx)(xe.a,{sm:"12",md:"3",className:"align-center space-mb",children:Object(m.jsxs)(be,{children:[Object(m.jsxs)(je,{children:[Object(m.jsx)("img",{src:c,className:"thumb",alt:""}),Object(m.jsx)("img",{src:"/images/staking/box-img.png",alt:"",className:"line-box"})]}),Object(m.jsx)(he,{children:Object(m.jsx)("img",{src:"/images/staking/effect.png",alt:""})}),Object(m.jsx)(me,{children:Object(m.jsx)(ge,{children:Object(m.jsx)(Oe,{onClick:function(){return i({name:n,description:t,tokenID:r,contractAddress:a,image:c})},children:"Register"})})})]})})},ke=t(1661),we=t(1657),ye=t(1658),Ae=t(1331),Ie=function(e,n){if(!e||"string"!==typeof e)return"";var t=e.length||0;return"".concat(e.slice(0,n),"...").concat(e.slice(t-n,t))};var Ne,De,Ce,Se,Te,Re,ze,Ee,Pe,Fe,We=function(e){var n=e.isShowModalSubmit,t=e.setShowModalSubmit,r=e.onSubmit,a=e.formRef,c=e.token;return Object(m.jsx)(ke.a,{title:"Submit Staking",visible:n,onCancel:function(){return t(!1)},footer:null,width:400,children:Object(m.jsxs)(we.a,{ref:a,onFinish:r,style:{width:"100%"},fields:[{name:["tokenID"],value:null===c||void 0===c?void 0:c.tokenID},{name:["contractAddress"],value:Ie(null===c||void 0===c?void 0:c.contractAddress,10)},null!=(null===c||void 0===c?void 0:c.name)&&{name:["name"],value:null===c||void 0===c?void 0:c.name},null!=(null===c||void 0===c?void 0:c.description)&&{name:"description",value:null===c||void 0===c?void 0:c.description}],children:[Object(m.jsxs)("div",{style:{marginBottom:"6px"},children:["Name",Object(m.jsx)("span",{style:{color:"red",marginRight:"4px"},children:"*"})]}),Object(m.jsx)(we.a.Item,{name:"name",validateTrigger:"onChange",children:Object(m.jsx)(ye.a,{style:{borderRadius:"16px",overflow:"hidden",width:"100%"},disabled:null===c||void 0===c?void 0:c.name,placeholder:"Enter name card to..."})}),Object(m.jsxs)("div",{style:{marginBottom:"6px"},children:["Description",Object(m.jsx)("span",{style:{color:"red",marginRight:"4px"},children:"*"})]}),Object(m.jsx)(we.a.Item,{name:"description",validateTrigger:"onChange",children:Object(m.jsx)(ye.a,{style:{borderRadius:"16px",overflow:"hidden",width:"100%"},disabled:null===c||void 0===c?void 0:c.description,placeholder:"Enter description to..."})}),Object(m.jsxs)("div",{style:{marginBottom:"6px"},children:["URL Token",Object(m.jsx)("span",{style:{color:"red",marginRight:"4px"},children:"*"})]}),Object(m.jsx)(we.a.Item,{name:"urlToken",validateTrigger:"onChange",children:Object(m.jsx)(ye.a,{style:{borderRadius:"16px",overflow:"hidden",width:"100%"},placeholder:"Enter url token to..."})}),Object(m.jsx)("div",{style:{marginBottom:"6px"},children:"Token ID"}),Object(m.jsx)(we.a.Item,{name:"tokenID",validateTrigger:"onChange",children:Object(m.jsx)(ye.a,{style:{borderRadius:"16px",overflow:"hidden",width:"100%"},disabled:!0})}),Object(m.jsx)("div",{style:{marginBottom:"6px"},children:"Contract Address"}),Object(m.jsx)(we.a.Item,{name:"contractAddress",validateTrigger:"onChange",children:Object(m.jsx)(ye.a,{style:{borderRadius:"16px",overflow:"hidden",width:"100%"},disabled:!0})}),Object(m.jsx)(we.a.Item,{children:Object(m.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:Object(m.jsx)(Ae.a,{htmlType:"submit",children:"Submit"})})})]})})},Be=function(e){var n=e.setMyTokens,t=e.activeTab,r=Object(u.useRef)(),a=Object(u.useRef)(!1),c=Object(u.useState)(!1),i=Object(o.a)(c,2),s=i[0],p=i[1],d=Object(oe.a)().account,f=Object(u.useState)([]),l=Object(o.a)(f,2),x=l[0],b=l[1],j=Object(u.useState)(),h=Object(o.a)(j,2),g=h[0],O=h[1];Object(u.useEffect)((function(){var e=function(){var e=Object(F.a)(P.a.mark((function e(){var t,r,a,c,i,s,u;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([X(d),pe.getAllTokensId()]);case 3:return t=e.sent,r=Object(o.a)(t,2),a=r[0],c=r[1],i=ce(a,d),n(i),s=ae(i,c),e.next=12,ie(s);case 12:u=e.sent,b(u),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),le("error",{message:"Fetching Error",description:null===e.t0||void 0===e.t0?void 0:e.t0.message});case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}();d&&"1"===t&&!a.current&&(e(),a.current=!0)}),[d,n,t]);var v=function(){var e=Object(F.a)(P.a.mark((function e(n){var t,r,a,c,i,o;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=8;break}return r=(t=g).contractAddress,a=t.tokenID,c=t.image,i=t.name,o=t.description,e.next=4,pe.registerStakingToken({urlToken:n.urlToken,name:null!==i&&void 0!==i?i:n.name,description:null!==o&&void 0!==o?o:n.description,image:c,tokenID:a,contractAddress:r}).catch((function(e){return le("error",{message:"Error",description:null===e||void 0===e?void 0:e.message})}));case 4:le("success",{message:"Update info NFT success, you can check NFT on approved collection",description:""}),p(!1),b((function(e){return e.filter((function(e){return e.tokenID!==a||e.contractAddress!==r}))})),O(null);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),k=function(e){O(e),p(!0)};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(W.a,{children:x.map((function(e){return Object(m.jsx)(ve,{name:e.name,description:e.description,image:e.image,contractAddress:e.contractAddress,tokenID:e.tokenID,onRegister:k})}))}),Object(m.jsx)(We,{isShowModalSubmit:s,setShowModalSubmit:p,formRef:r,onSubmit:v,token:g})]})},Me=f.default.div(Ne||(Ne=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  max-width: auto;\n\n  @media (min-width: 768px) {\n    max-width: 230px;\n  }\n"]))),Ue=f.default.div(De||(De=Object(i.a)(["\n  position: relative;\n  width: 180px;\n  height: 276px;\n  overflow: hidden;\n\n  .thumb {\n    height: inherit;\n    transform: scale(1);\n    transition: all 0.9s;\n    object-fit: cover;\n  }\n\n  .line-box {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 2;\n  }\n"]))),Ve=f.default.div(Ce||(Ce=Object(i.a)(["\n  margin-bottom: 15px;\n"]))),Ye=(f.default.div(Se||(Se=Object(i.a)(["\n  background: #2f2f2f;\n  border-bottom-left-radius: 12px;\n  border-bottom-right-radius: 12px;\n  width: 280px;\n\n  @media (min-width: 768px) {\n    width: 100%;\n  }\n"]))),f.default.button(Te||(Te=Object(i.a)(["\n  background: url('../images/staking/line-button.png') no-repeat center center;\n  background-size: contain;\n  width: 100%;\n  height: 67px;\n  line-height: 67px;\n  font-size: 20px;\n  font-weight: 700;\n  text-transform: uppercase;\n  text-align: center;\n  color: #ff3b3b;\n  border: 0;\n\n  &.green-color {\n    color: #1cbb1c;\n  }\n\n  &:hover {\n    .effect-light {\n      text-align: center;\n      font-size: 1.2em;\n      color: #fff;\n      font-weight: 700;\n      text-transform: uppercase;\n      animation: blur 0.75s ease-out infinite;\n      text-shadow: 0px 0px 5px #fff, 0px 0px 7px #fff;\n    }\n  }\n\n  @keyframes blur {\n    from {\n      text-shadow: 0px 0px 10px #fff, 0px 0px 10px #fff, 0px 0px 25px #fff, 0px 0px 25px #fff, 0px 0px 25px #fff,\n        0px 0px 25px #fff, 0px 0px 25px #fff, 0px 0px 25px #fff, 0px 0px 50px #fff, 0px 0px 50px #fff,\n        0px 0px 50px #7b96b8, 0px 0px 150px #7b96b8, 0px 10px 100px #7b96b8, 0px 10px 100px #7b96b8,\n        0px 10px 100px #7b96b8, 0px 10px 100px #7b96b8, 0px -10px 100px #7b96b8, 0px -10px 100px #7b96b8;\n    }\n  }\n"]))),f.default.div(Re||(Re=Object(i.a)(["\n  padding: 15px;\n"]))),f.default.h2(ze||(ze=Object(i.a)(["\n  font-size: 16px;\n  text-transform: capitalize;\n  color: #ffffff;\n  margin-bottom: 10px;\n"]))),f.default.div(Ee||(Ee=Object(i.a)(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  align-items: center;\n"]))),f.default.h3(Pe||(Pe=Object(i.a)(["\n  color: #f4c708;\n  font-size: 24px;\n  font-family: 'Roboto Mono', monospace !important;\n  font-weight: 600;\n  position: relative;\n  transform: scale(1);\n  text-shadow: -1px 0 1px #c5a354, 0 1px 1px #e0b649, 5px 5px 10px rgb(179 167 106 / 78%),\n    -5px -5px 10px rgb(183 155 65 / 40%);\n\n  &:before {\n    content: attr(data-heading);\n    left: 0;\n    top: 0;\n    position: absolute;\n    z-index: 1;\n    background: linear-gradient(\n      to bottom,\n      #ffe047 22%,\n      #fff144 24%,\n      #cfc09f 26%,\n      #ffe686 27%,\n      #ffecb3 40%,\n      #ffe14f 78%\n    );\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    text-shadow: none;\n  }\n"]))),f.default.div(Fe||(Fe=Object(i.a)(["\n  background: url('../images/staking/bg-button.png') no-repeat center center;\n  background-size: contain;\n  width: 100%;\n  height: 36px;\n  text-transform: uppercase;\n  text-align: center;\n  line-height: 36px;\n  font-size: 14px;\n  font-weight: 600;\n"]))),function(e){var n=e.image;return Object(m.jsx)(xe.a,{sm:"12",md:"3",className:"align-center space-mb",children:Object(m.jsxs)(Me,{children:[Object(m.jsxs)(Ue,{children:[Object(m.jsx)("img",{src:n,className:"thumb",alt:""}),Object(m.jsx)("img",{src:"/images/staking/box-img.png",alt:"",className:"line-box"})]}),Object(m.jsx)(Ve,{children:Object(m.jsx)("img",{src:"/images/staking/effect.png",alt:""})})]})})}),Ke=function(e){var n=e.activeTab,t=Object(u.useState)([]),r=Object(o.a)(t,2),a=r[0],c=r[1],i=Object(u.useRef)(!1);return Object(u.useEffect)((function(){var e=function(){var e=Object(F.a)(P.a.mark((function e(){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pe.getPendingTokens();case 3:n=e.sent,c(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),le("error",{message:"Error",description:null===e.t0||void 0===e.t0?void 0:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();"2"!==n||i.current||(e(),i.current=!0)}),[n]),Object(m.jsx)(W.a,{children:a.length>0&&a.map((function(e){return Object(m.jsx)(Ye,{image:e.image})}))})},Le=t(37),Ge=t(9),Xe=t(127),_e=t(45),He=function(e,n,t){for(var r=0;r<e.length;r++)if(e[r].contractAddress===Object(_e.getAddress)(n)&&e[r].tokenID===t)return!0;return!1},Je=function(e,n,t){for(var r=0;r<e.length;r++)if(e[r].contractAddress===Object(_e.getAddress)(n)&&e[r].tokenID===t)return e[r];return null},qe=t(167),Ze=t(40),Qe=t(7),$e=t(216),en=t(231),nn=t(67),tn=t(149),rn=t(29),an=t(81),cn=t(69),on=t(42);var sn=t(84);var un,pn,dn,fn,ln,xn,bn,jn,hn,mn,gn=f.default.div(un||(un=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  max-width: auto;\n\n  @media (min-width: 768px) {\n    max-width: 230px;\n  }\n"]))),On=f.default.div(pn||(pn=Object(i.a)(["\n  position: relative;\n  width: 180px;\n  height: 276px;\n  overflow: hidden;\n\n  .thumb {\n    height: inherit;\n    transform: scale(1);\n    transition: all 0.9s;\n    object-fit: cover;\n  }\n\n  .line-box {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 2;\n  }\n"]))),vn=f.default.div(dn||(dn=Object(i.a)(["\n  margin-bottom: 15px;\n"]))),kn=f.default.div(fn||(fn=Object(i.a)(["\n  background: #2f2f2f;\n  border-bottom-left-radius: 12px;\n  border-bottom-right-radius: 12px;\n  width: 280px;\n\n  @media (min-width: 768px) {\n    width: 100%;\n  }\n"]))),wn=f.default.button(ln||(ln=Object(i.a)(["\n  background: url('../images/staking/line-button.png') no-repeat center center;\n  background-size: contain;\n  width: 100%;\n  height: 67px;\n  line-height: 67px;\n  font-size: 20px;\n  font-weight: 700;\n  text-transform: uppercase;\n  text-align: center;\n  color: #ff3b3b;\n  border: 0;\n\n  &.green-color {\n    color: #1cbb1c;\n  }\n\n  &:hover {\n    .effect-light {\n      text-align: center;\n      font-size: 1.2em;\n      color: #fff;\n      font-weight: 700;\n      text-transform: uppercase;\n      animation: blur 0.75s ease-out infinite;\n      text-shadow: 0px 0px 5px #fff, 0px 0px 7px #fff;\n    }\n  }\n\n  @keyframes blur {\n    from {\n      text-shadow: 0px 0px 10px #fff, 0px 0px 10px #fff, 0px 0px 25px #fff, 0px 0px 25px #fff, 0px 0px 25px #fff,\n        0px 0px 25px #fff, 0px 0px 25px #fff, 0px 0px 25px #fff, 0px 0px 50px #fff, 0px 0px 50px #fff,\n        0px 0px 50px #7b96b8, 0px 0px 150px #7b96b8, 0px 10px 100px #7b96b8, 0px 10px 100px #7b96b8,\n        0px 10px 100px #7b96b8, 0px 10px 100px #7b96b8, 0px -10px 100px #7b96b8, 0px -10px 100px #7b96b8;\n    }\n  }\n"]))),yn=f.default.div(xn||(xn=Object(i.a)(["\n  padding: 15px;\n"]))),An=f.default.h2(bn||(bn=Object(i.a)(["\n  font-size: 16px;\n  text-transform: capitalize;\n  color: #ffffff;\n  margin-bottom: 10px;\n"]))),In=f.default.div(jn||(jn=Object(i.a)(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  align-items: center;\n"]))),Nn=f.default.h3(hn||(hn=Object(i.a)(["\n  color: #f4c708;\n  font-size: 24px;\n  font-family: 'Roboto Mono', monospace !important;\n  font-weight: 600;\n  position: relative;\n  transform: scale(1);\n  text-shadow: -1px 0 1px #c5a354, 0 1px 1px #e0b649, 5px 5px 10px rgb(179 167 106 / 78%),\n    -5px -5px 10px rgb(183 155 65 / 40%);\n\n  &:before {\n    content: attr(data-heading);\n    left: 0;\n    top: 0;\n    position: absolute;\n    z-index: 1;\n    background: linear-gradient(\n      to bottom,\n      #ffe047 22%,\n      #fff144 24%,\n      #cfc09f 26%,\n      #ffe686 27%,\n      #ffecb3 40%,\n      #ffe14f 78%\n    );\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    text-shadow: none;\n  }\n"]))),Dn=f.default.div(mn||(mn=Object(i.a)(["\n  background: url('../images/staking/bg-button.png') no-repeat center center;\n  background-size: contain;\n  width: 100%;\n  height: 36px;\n  text-transform: uppercase;\n  text-align: center;\n  line-height: 36px;\n  font-size: 14px;\n  font-weight: 600;\n"]))),Cn=function(e){var n=e.image,t=e.contractAddress,r=e.pendingReward,a=e.tokenID,c=e.onHarvest,i=e.onConfirmWithdraw,o=(e.createdAt,e.isTxPending);e.changeViewWhenWithdraw;return Object(m.jsx)(xe.a,{sm:"12",md:"3",className:"align-center space-mb",children:Object(m.jsxs)(gn,{children:[Object(m.jsxs)(On,{children:[Object(m.jsx)("img",{src:n,className:"thumb",alt:""}),Object(m.jsx)("img",{src:"/images/staking/box-img.png",alt:"",className:"line-box"})]}),Object(m.jsx)(vn,{children:Object(m.jsx)("img",{src:"/images/staking/effect.png",alt:""})}),Object(m.jsxs)(kn,{children:[Object(m.jsx)(wn,{className:"green-color",children:Object(m.jsx)("span",{className:"effect-light",children:"Staking"})}),Object(m.jsxs)(yn,{children:[Object(m.jsx)(An,{children:"Collected Reward:"}),!o&&Object(m.jsxs)(In,{children:[Object(m.jsx)(Nn,{"data-heading":"",children:r}),Object(m.jsx)(Dn,{onClick:function(){return c({tokenID:a,contractAddress:t})},children:"claim"}),Object(m.jsx)(Dn,{onClick:i,children:"withdraw"})]})]})]})]})})};function Sn(e){var n=e.currency,t=e.depositAmount,r=e.rewardAmount,a=e.onWithdraw,c=e.harvestFee,i=Ge.CurrencyAmount.fromRawAmount(n,Object(qe.d)(null===r||void 0===r?void 0:r.raw,c));return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(en.b,{children:[Object(m.jsx)(Qe.xb,{children:"XLUCKY Deposited"}),Object(m.jsxs)(en.c,{children:[Object(m.jsx)(nn.a,{currency:n,style:{marginRight:"8px"}}),Object(m.jsx)(Qe.xb,{children:null===t||void 0===t?void 0:t.toSignificant(6)})]})]}),Object(m.jsxs)(en.b,{children:[Object(m.jsx)(Qe.xb,{children:"XLUCKY Reward"}),Object(m.jsxs)(en.c,{children:[Object(m.jsx)(nn.a,{currency:n,style:{marginRight:"8px"}}),Object(m.jsx)(Qe.xb,{children:null===r||void 0===r?void 0:r.toSignificant(6)})]})]}),Object(m.jsxs)(en.b,{children:[Object(m.jsx)(Qe.xb,{children:"Fee (in percent)"}),Object(m.jsx)(en.c,{children:Object(m.jsxs)(Qe.xb,{children:[c,"%"]})})]}),Object(m.jsxs)(en.b,{children:[Object(m.jsx)(Qe.xb,{children:"Fee"}),Object(m.jsxs)(en.c,{children:[Object(m.jsx)(nn.a,{currency:n,style:{marginRight:"8px"}}),Object(m.jsx)(Qe.xb,{children:null===i||void 0===i?void 0:i.toSignificant(6)})]})]}),Object(m.jsx)(Qe.l,{mt:"20px",onClick:a,className:"btn-supply",children:"Withdraw"})]})}var Tn,Rn,zn,En,Pn,Fn=function(e){var n,t,r=e.stakingTokens,a=e.changeViewWhenWithdraw,c=Object(oe.a)().chainId,i=function(e){for(var n=Object(Ze.y)(),t=Object(oe.a)().chainId,r=Object(an.d)(rn.p[t]),a=Object(u.useMemo)((function(){return e?e.map((function(e){return Object(M.a)(Object(M.a)({},e),{},{contractAddress:Object(on.g)(e.contractAddress)})})).filter((function(e){return!1!==e.contractAddress})).sort():[]}),[e]),c=Object(cn.d)(n,"pendingReward",a.map((function(e){return[e.contractAddress,e.tokenID]}))),i=[],o=0;o<c.length;o++){var s,p,d=null===c||void 0===c||null===(s=c[o])||void 0===s||null===(p=s.result)||void 0===p?void 0:p[0];d&&i.push(Ge.CurrencyAmount.fromRawAmount(r,Ge.JSBI.BigInt(d.toString())))}return i}(r),s=Object(Ze.y)(),p=Object(u.useState)(!1),d=Object(o.a)(p,2),f=d[0],l=d[1],x=Object(u.useState)(""),b=Object(o.a)(x,2),j=b[0],h=b[1],g=Object(sn.f)(j),O=Object(sn.e)(j),v=Object(sn.g)(),k=Object(u.useState)(!1),w=Object(o.a)(k,2),y=w[0],A=w[1],I=Object(an.d)(rn.p[c]),N=Object(u.useState)(null),D=Object(o.a)(N,2),C=D[0],S=D[1],T=Object(u.useState)(null),R=Object(o.a)(T,2),z=R[0],E=R[1];console.log("txHashWithdraw : ",j),console.log("is pending withdraw : ",g),Object(u.useEffect)((function(){s.FEE_WITHDRAW().then((function(e){E(e.toNumber())})).catch((function(e){le("error",{message:"Error when get fee withdraw",description:null===e||void 0===e?void 0:e.message})}))}),[s]),Object(u.useEffect)((function(){if(O){var e=C.tokenID,n=C.contractAddress;a({tokenID:e,contractAddress:n})}}),[O,a,C]);var B=function(){var e=Object(F.a)(P.a.mark((function e(n){var t,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.tokenID,r=n.contractAddress,s.harvest(r,t).then((function(e){h(e.hash)})).catch((function(e){le("error",{message:"Error",description:null===e||void 0===e?void 0:e.message})}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),U=function(){var e=Object(F.a)(P.a.mark((function e(){var n,t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l(!0),n=C.tokenID,t=C.contractAddress,s.withdraw(t,n).then((function(e){l(!1),v(e,{summary:"\n            Withdraw token ".concat(n,"\n          ")}),h(e.hash)})).catch((function(e){l(!1),le("error",{message:"Error",description:null===e||void 0===e?void 0:e.message})}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=Object(u.useCallback)((function(){A(!1),h("")}),[]),Y=function(){return Object(m.jsxs)($e.a,{gap:"20px",children:[Object(m.jsxs)(en.d,{style:{marginTop:"20px"},children:[Object(m.jsx)(Qe.xb,{fontSize:"48px",mr:"8px",children:(null===C||void 0===C?void 0:C.depositAmount).add(null===C||void 0===C?void 0:C.pendingReward).subtract(Ge.CurrencyAmount.fromRawAmount(I,Object(qe.d)((null===C||void 0===C?void 0:C.pendingReward).raw,z))).toFixed(4)}),Object(m.jsx)(nn.a,{currency:I})]}),Object(m.jsx)(Qe.xb,{small:!0,textAlign:"left",padding:"8px 0 0 0 ",style:{fontStyle:"italic"},children:"Amount of XLUCKY you receive will increase a little bit"})]})},K=function(){return Object(m.jsx)(Sn,{currency:I,depositAmount:null===C||void 0===C?void 0:C.depositAmount,rewardAmount:null===C||void 0===C?void 0:C.pendingReward,harvestFee:z,onWithdraw:U})},L="You will receive ".concat(null===C||void 0===C||null===(n=C.depositAmount)||void 0===n?void 0:n.toSignificant(6)," as deposited and ").concat(null===C||void 0===C||null===(t=C.pendingReward)||void 0===t?void 0:t.toSignificant(6)," as reward.\n  Staking contract will also transfer ownership of this token to you\n  ");return Object(m.jsxs)(W.a,{children:[Object(m.jsx)(tn.c,{isOpen:y,onDismiss:V,attemptingTxn:f,hash:j,content:function(){return Object(m.jsx)(tn.a,{title:"You will receive",onDismiss:V,topContent:Y,bottomContent:K})},pendingText:L}),r.map((function(e,n){return Object(m.jsx)(Cn,{image:e.image,contractAddress:e.contractAddress,tokenID:e.tokenID,pendingReward:i[n]?i[n].toFixed(4):"0.0000",onHarvest:B,onConfirmWithdraw:function(){A(!0),S(Object(M.a)(Object(M.a)({},e),{},{pendingReward:i[n],depositAmount:Ge.CurrencyAmount.fromRawAmount(I,Object(qe.c)(e.depositAmount))}))},createdAt:e.createdAt,changeViewWhenWithdraw:a,isTxPending:g})}))]})},Wn=t(191),Bn=t(41),Mn=t(601);function Un(e){var n=e.currency,t=e.depositAmount,r=e.onStake,a=e.rateReward;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(en.b,{children:[Object(m.jsx)(Qe.xb,{children:"XLUCKY Deposited"}),Object(m.jsxs)(en.c,{children:[Object(m.jsx)(nn.a,{currency:n,style:{marginRight:"8px"}}),Object(m.jsx)(Qe.xb,{children:null===t||void 0===t?void 0:t.toSignificant(6)})]})]}),Object(m.jsxs)(en.b,{children:[Object(m.jsx)(Qe.xb,{children:"Rate reward (per year)"}),Object(m.jsxs)(en.c,{children:[Object(m.jsx)(nn.a,{currency:n,style:{marginRight:"8px"}}),Object(m.jsxs)(Qe.xb,{children:[a,"%"]})]})]}),Object(m.jsx)(Qe.l,{mt:"20px",onClick:r,className:"btn-supply",children:"Stake"})]})}var Vn,Yn=f.default.div(Tn||(Tn=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  max-width: auto;\n\n  @media (min-width: 768px) {\n    max-width: 230px;\n  }\n"]))),Kn=f.default.div(Rn||(Rn=Object(i.a)(["\n  position: relative;\n  width: 180px;\n  height: 276px;\n  overflow: hidden;\n\n  .thumb {\n    height: inherit;\n    transform: scale(1);\n    transition: all 0.9s;\n    object-fit: cover;\n  }\n\n  .line-box {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 2;\n  }\n"]))),Ln=f.default.div(zn||(zn=Object(i.a)(["\n  margin-bottom: 15px;\n"]))),Gn=f.default.div(En||(En=Object(i.a)(["\n  background: #2f2f2f;\n  border-bottom-left-radius: 12px;\n  border-bottom-right-radius: 12px;\n  width: 280px;\n\n  @media (min-width: 768px) {\n    width: 100%;\n  }\n"]))),Xn=f.default.button(Pn||(Pn=Object(i.a)(["\n  background: url('../images/staking/line-button.png') no-repeat center center;\n  background-size: contain;\n  width: 100%;\n  height: 67px;\n  line-height: 67px;\n  font-size: 20px;\n  font-weight: 700;\n  text-transform: uppercase;\n  text-align: center;\n  color: #ff3b3b;\n  border: 0;\n\n  &.green-color {\n    color: #1cbb1c;\n  }\n\n  &:hover {\n    .effect-light {\n      text-align: center;\n      font-size: 1.2em;\n      color: #fff;\n      font-weight: 700;\n      text-transform: uppercase;\n      animation: blur 0.75s ease-out infinite;\n      text-shadow: 0px 0px 5px #fff, 0px 0px 7px #fff;\n    }\n  }\n\n  @keyframes blur {\n    from {\n      text-shadow: 0px 0px 10px #fff, 0px 0px 10px #fff, 0px 0px 25px #fff, 0px 0px 25px #fff, 0px 0px 25px #fff,\n        0px 0px 25px #fff, 0px 0px 25px #fff, 0px 0px 25px #fff, 0px 0px 50px #fff, 0px 0px 50px #fff,\n        0px 0px 50px #7b96b8, 0px 0px 150px #7b96b8, 0px 10px 100px #7b96b8, 0px 10px 100px #7b96b8,\n        0px 10px 100px #7b96b8, 0px 10px 100px #7b96b8, 0px -10px 100px #7b96b8, 0px -10px 100px #7b96b8;\n    }\n  }\n"]))),_n=function(e){var n=e.image,t=e.contractAddress,r=e.tokenID,a=e.approveState,c=e.onApprove,i=e.changeViewWhenStake,s=e.depositAmount,p=Object(oe.a)().chainId,d=Object(Ze.y)(),f=Object(u.useState)(""),l=Object(o.a)(f,2),x=l[0],b=l[1],j=Object(sn.g)(),h=function(e,n,t){var r=Object(Mn.a)(e,n),a=Object(Ze.q)(n),c=Object(sn.d)(e,n,Object(Bn.a)(Y.a.stakingNft)),i=Object(u.useMemo)((function(){return e&&n&&t&&r?r!==t?c?rn.a.PENDING:rn.a.NOT_APPROVED:rn.a.APPROVED:rn.a.UNKNOWN}),[e,n,t,r,c]),o=Object(sn.g)(),s=Object(u.useCallback)(Object(F.a)(P.a.mark((function r(){var c;return P.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i===rn.a.NOT_APPROVED){r.next=3;break}return console.error("approve was called unnecessarily"),r.abrupt("return");case 3:if(e){r.next=6;break}return console.error("no token id"),r.abrupt("return");case 6:if(n){r.next=9;break}return console.error("contract address is null"),r.abrupt("return");case 9:if(t){r.next=12;break}return console.error("no spender"),r.abrupt("return");case 12:return r.next=14,a.estimateGas.approve(t,e).catch((function(){return a.estimateGas.approve(t,e)}));case 14:return c=r.sent,r.abrupt("return",a.approve(t,e,{gasLimit:Object(on.b)(c)}).then((function(r){o(r,{summary:"Approve ".concat(e," to staking contract"),approvalNFT:{tokenID:e,contractAddress:n,spender:t}})})).catch((function(e){throw console.error("Failed to approve token",e),e})));case 16:case"end":return r.stop()}}),r)}))),[i,e,n,a,t,o]);return[i,s]}(r,t,d.address),g=Object(o.a)(h,2),O=g[0],v=g[1],k=Object(sn.e)(x),w=Object(sn.f)(x),y=Object(u.useState)(!1),A=Object(o.a)(y,2),I=A[0],N=A[1],D=Object(u.useState)(!1),C=Object(o.a)(D,2),S=C[0],T=C[1],R=Object(an.d)(rn.p[p]),z=Object(u.useState)(0),E=Object(o.a)(z,2),W=E[0],B=E[1];Object(u.useEffect)((function(){k&&(le("success",{message:"Stake",description:"Stake token ".concat(r," successfully")}),pe.stakeToken({tokenID:r,contractAddress:t}).then((function(){i({tokenID:r,contractAddress:t}),le("success",{message:"Stake",description:"Stake token ".concat(r," successfully")})})).catch((function(e){return le("error",{message:"Error",description:null===e||void 0===e?void 0:e.message})})))}),[k,r,t,i]),Object(u.useEffect)((function(){r&&t&&function(){var e=Object(F.a)(P.a.mark((function e(){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pe.getTokenByID({tokenID:r,contractAddress:t});case 3:n=e.sent,B(parseInt(n.rateReward)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),le("error",{message:"Get token from db error",description:null===e.t0||void 0===e.t0?void 0:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()()}),[r,t]);var M=function(){var e=Object(F.a)(P.a.mark((function e(){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,N(!0),e.next=4,d.stake(Xe.a.utils.getAddress(t),Xe.a.BigNumber.from(r));case 4:n=e.sent,N(!1),j(n,{summary:"Stake NFT ".concat(r," from ").concat(t)}),b(n.hash),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),N(!1),le("error",{message:"Error",description:null===e.t0||void 0===e.t0?void 0:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),U=Object(u.useCallback)((function(){T(!1),b("")}),[]),V=function(){return Object(m.jsxs)($e.a,{gap:"20px",children:[Object(m.jsxs)(en.d,{style:{marginTop:"20px"},children:[Object(m.jsx)(Qe.xb,{fontSize:"48px",mr:"8px",children:s.toSignificant(6)}),Object(m.jsx)(nn.a,{currency:R})]}),Object(m.jsx)(Qe.xb,{small:!0,textAlign:"left",padding:"8px 0 0 0 ",style:{fontStyle:"italic"},children:"You will receive deposit when you withdraw"})]})},K=function(){return Object(m.jsx)(Un,{currency:R,rateReward:W,depositAmount:s,onStake:M})};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(tn.c,{isOpen:S,onDismiss:U,attemptingTxn:I,hash:x,content:function(){return Object(m.jsx)(tn.a,{title:"You will stake this token and transfer to staking contract as deposit",onDismiss:U,topContent:V,bottomContent:K})},pendingText:"You are transferring ownership of this token to staking contract and number of XLUCKY to deposit"}),Object(m.jsx)(xe.a,{sm:"12",md:"3",className:"align-center space-mb",children:Object(m.jsxs)(Yn,{children:[Object(m.jsxs)(Kn,{children:[Object(m.jsx)("img",{src:n,className:"thumb",alt:""}),Object(m.jsx)("img",{src:"/images/staking/box-img.png",alt:"",className:"line-box"})]}),Object(m.jsx)(Ln,{children:Object(m.jsx)("img",{src:"/images/staking/effect.png",alt:""})}),Object(m.jsxs)(Gn,{children:[a===rn.a.NOT_APPROVED?Object(m.jsx)(Xn,{className:"green-color",onClick:c,children:Object(m.jsx)("span",{className:"effect-light",children:"Approve XLUCKY"})}):a===rn.a.PENDING?Object(m.jsx)(Xn,{className:"green-color",children:Object(m.jsx)("span",{className:"effect-light",children:"Approving..."})}):a===rn.a.UNKNOWN?Object(m.jsx)(Xn,{className:"green-color",children:Object(m.jsx)("span",{className:"effect-light",children:"Checking..."})}):Object(m.jsx)(m.Fragment,{children:" "}),O===rn.a.NOT_APPROVED?Object(m.jsx)(Xn,{className:"green-color",onClick:function(){return v()},children:Object(m.jsx)("span",{className:"effect-light",children:"Approve NFT"})}):O===rn.a.PENDING?Object(m.jsx)(Xn,{className:"green-color",children:Object(m.jsx)("span",{className:"effect-light",children:"Approving NFT..."})}):O===rn.a.UNKNOWN?Object(m.jsx)(Xn,{className:"green-color",children:Object(m.jsx)("span",{className:"effect-light",children:"Checking..."})}):Object(m.jsx)(m.Fragment,{children:" "}),a===rn.a.APPROVED&&O===rn.a.APPROVED&&(w?Object(m.jsx)(Xn,{className:"green-color",children:Object(m.jsx)("span",{className:"effect-light",children:"Staking...."})}):Object(m.jsx)(Xn,{onClick:function(){T(!0)},className:"green-color",children:Object(m.jsx)("span",{className:"effect-light",children:"Stake"})}))]})]})})]})},Hn=function(e){var n=e.approvedTokens,t=e.maxDepositAmount,r=e.changeViewWhenStake,a=Object(Ze.y)(),c=Object(oe.a)().chainId,i=Object(an.d)(rn.p[c]),s=Object(Wn.a)(Ge.CurrencyAmount.fromRawAmount(i,t),null===a||void 0===a?void 0:a.address),u=Object(o.a)(s,2),p=u[0],d=u[1],f=function(){d().catch((function(e){le("error",{message:"Error",description:null===e||void 0===e?void 0:e.message})}))};return Object(m.jsx)(W.a,{children:n.map((function(e){return Object(m.jsx)(_n,{image:e.image,contractAddress:e.contractAddress,tokenID:e.tokenID,changeViewWhenStake:r,approveState:p,onApprove:f,depositAmount:Ge.CurrencyAmount.fromRawAmount(i,Object(qe.c)(null===e||void 0===e?void 0:e.depositAmount))})}))})},Jn=function(e){var n=e.myTokens,t=e.activeTab,r=Object(u.useState)([]),a=Object(o.a)(r,2),c=a[0],i=a[1],s=Object(u.useState)([]),p=Object(o.a)(s,2),f=p[0],l=p[1],x=Object(u.useState)(Ge.JSBI.BigInt(0)),b=Object(o.a)(x,2),j=b[0],h=b[1],g=Object(u.useRef)(!1),O=Object(oe.a)().account,v=Object(Ze.y)();Object(u.useEffect)((function(){var e=function(){var e=Object(F.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v&&v.getAllPools().then((function(e){var t=e.map((function(e){return Object(M.a)(Object(M.a)({},e),{},{tokenID:e.tokenID.toNumber(),createdAt:new Date(1e3*e.createdAt)})}));l(t.filter((function(e){return e.owner===Xe.a.constants.AddressZero&&He(n,e.contractAddress,e.tokenID)}))),i(t.filter((function(e){return e.owner===O})))})).catch((function(e){return le("error",{message:"Error",description:null===e||void 0===e?void 0:e.message})}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();O&&n.length>0&&v&&("3"===t||"4"===t)&&!g.current&&(e(),g.current=!0)}),[v,O,n,g,t]),Object(u.useEffect)((function(){var e=function(e,n){if(0===e.length)return 0;for(var t=e[0][n],r=1;r<e.length;r++)e[r][n]>t&&(t=e[r][n]);return t}(f,"depositAmount");h(Object(qe.f)(e))}),[f]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(d.a,{tabId:"3",children:f.length>0&&Object(m.jsx)(Hn,{changeViewWhenStake:function(e){var n=e.tokenID,t=e.contractAddress;l((function(e){return e.filter((function(e){return e.tokenID!==n&&e.contractAddress!==t}))})),i((function(e){return[].concat(Object(Le.a)(e),[Object(M.a)(Object(M.a)({},Je(f,t,n)),{},{owner:O,createdAt:new Date(Date.now())})])}))},approvedTokens:f,maxDepositAmount:j})}),Object(m.jsx)(d.a,{tabId:"4",children:c.length>0&&Object(m.jsx)(Fn,{changeViewWhenWithdraw:function(e){var n=e.tokenID,t=e.contractAddress;i((function(e){return e.filter((function(e){return e.tokenID!==n&&e.contractAddress!==t}))})),l((function(e){return[].concat(Object(Le.a)(e),[Object(M.a)(Object(M.a)({},Je(c,t,n)),{},{owner:Xe.a.constants.AddressZero})])}))},stakingTokens:c})})]})},qn=f.default.div(Vn||(Vn=Object(i.a)(["\n  .align-center {\n    display: unset;\n\n    @media (min-width: 768px) {\n      display: flex;\n      justify-content: center;\n    }\n\n    &:hover {\n      cursor: pointer;\n\n      .thumb {\n        transform: scale(0.9);\n        transition: all 0.9s;\n      }\n\n      .effect-light {\n        text-align: center;\n        font-size: 1.2em;\n        color: #fff;\n        font-weight: 700;\n        text-transform: uppercase;\n        animation: blur 0.75s ease-out infinite;\n        text-shadow: 0px 0px 5px #fff, 0px 0px 7px #fff;\n      }\n    }\n  }\n\n  .space-mb {\n    margin-bottom: 40px;\n\n    @media (max-width: 768px) {\n      margin-bottom: 40px;\n      padding-bottom: 40px;\n      border-bottom: 1px solid #ffffff57;\n\n      &:last-child {\n        border: none;\n      }\n    }\n  }\n"])));n.default=function(){var e=Object(u.useState)("1"),n=Object(o.a)(e,2),t=n[0],r=n[1],a=Object(u.useState)([]),c=Object(o.a)(a,2),i=c[0],f=c[1];return Object(m.jsx)(s.a,{children:Object(m.jsxs)(qn,{children:[Object(m.jsx)(g,{activeTab:t,toggle:function(e){t!==e&&r(e)}}),Object(m.jsxs)(p.a,{activeTab:t,children:[Object(m.jsx)(d.a,{tabId:"1",children:Object(m.jsx)(Be,{activeTab:t,setMyTokens:f})}),Object(m.jsx)(d.a,{tabId:"2",children:Object(m.jsx)(Ke,{activeTab:t})}),Object(m.jsx)(Jn,{activeTab:t,myTokens:i})]})]})})}}}]);
//# sourceMappingURL=25.8c6b7f14.chunk.js.map